(function(j,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(j=typeof globalThis!="undefined"?globalThis:j||self,o(j["v-network-graph"]={},j.Vue))})(this,function(j,o){"use strict";const an=["paths","nodes","focusring","edges","base","grid","background","root"];function ve(e){return o.isReactive(e)?e:o.reactive(e)}function R(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}const sn=Symbol("containers");function br(e){o.provide(sn,e)}function mt(){const e=R(o.inject(sn),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}class O{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(r=>r instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([r,i])=>[r,i instanceof Function?i(n):i]))}}var $=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))($||{});function We(e){const t={};return Object.assign(t,e(t))}function wr(e){return e}function Er(e){return e}function ln(e,t,n){const r=O.values(t.normal,e);return r.type=="circle"?{width:r.radius*2*n,height:r.radius*2*n}:{width:r.width*n,height:r.height*n}}function kr(e,t,n,r){const a=Math.abs(e.x-n.x)<t.width/2+r.width/2,s=Math.abs(e.y-n.y)<t.height/2+r.height/2;return a&&s}function ze(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(r=>parseInt(r)*t).filter(r=>!isNaN(r)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function Ue(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(r=>parseInt(r)).filter(r=>!isNaN(r));n.length%2===0?t=n.reduce((r,i)=>r+i,0):t=n.reduce((r,i)=>r+i,0)*2}else t=e*2;return t}var Pr=typeof global=="object"&&global&&global.Object===Object&&global;const cn=Pr;var xr=typeof self=="object"&&self&&self.Object===Object&&self,Sr=cn||xr||Function("return this")();const ne=Sr;var _r=/\s/;function Or(e){for(var t=e.length;t--&&_r.test(e.charAt(t)););return t}var Mr=/^\s+/;function Cr(e){return e&&e.slice(0,Or(e)+1).replace(Mr,"")}function ie(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Tr=ne.Symbol;const ue=Tr;var un=Object.prototype,$r=un.hasOwnProperty,Br=un.toString,Ie=ue?ue.toStringTag:void 0;function zr(e){var t=$r.call(e,Ie),n=e[Ie];try{e[Ie]=void 0;var r=!0}catch(a){}var i=Br.call(e);return r&&(t?e[Ie]=n:delete e[Ie]),i}var Ir=Object.prototype,Ar=Ir.toString;function Lr(e){return Ar.call(e)}var jr="[object Null]",Nr="[object Undefined]",dn=ue?ue.toStringTag:void 0;function ye(e){return e==null?e===void 0?Nr:jr:dn&&dn in Object(e)?zr(e):Lr(e)}function de(e){return e!=null&&typeof e=="object"}var Dr="[object Symbol]";function fn(e){return typeof e=="symbol"||de(e)&&ye(e)==Dr}var hn=0/0,Zr=/^[-+]0x[0-9a-f]+$/i,Rr=/^0b[01]+$/i,Vr=/^0o[0-7]+$/i,qr=parseInt;function Ge(e){if(typeof e=="number")return e;if(fn(e))return hn;if(ie(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ie(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Cr(e);var n=Rr.test(e);return n||Vr.test(e)?qr(e.slice(2),n?2:8):Zr.test(e)?hn:+e}var pn=1/0,Hr=17976931348623157e292;function Fr(e){if(!e)return e===0?e:0;if(e=Ge(e),e===pn||e===-pn){var t=e<0?-1:1;return t*Hr}return e===e?e:0}function gn(e){var t=Fr(e),n=t%1;return t===t?n?t-n:t:0}function Wr(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ur=Array.isArray;const be=Ur;var Gr=1/0,mn=ue?ue.prototype:void 0,vn=mn?mn.toString:void 0;function yn(e){if(typeof e=="string")return e;if(be(e))return Wr(e,yn)+"";if(fn(e))return vn?vn.call(e):"";var t=e+"";return t=="0"&&1/e==-Gr?"-0":t}function bn(e){return e==null?"":yn(e)}var Xr=ne.isFinite,Kr=Math.min;function Yr(e){var t=Math[e];return function(n,r){if(n=Ge(n),r=r==null?0:Kr(gn(r),292),r&&Xr(n)){var i=(bn(n)+"e").split("e"),a=t(i[0]+"e"+(+i[1]+r));return i=(bn(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var Qr=Yr("round");const wn=Qr;var Jr=Object.defineProperty,En=Object.getOwnPropertySymbols,ei=Object.prototype.hasOwnProperty,ti=Object.prototype.propertyIsEnumerable,kn=(e,t,n)=>t in e?Jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ni=(e,t)=>{for(var n in t||(t={}))ei.call(t,n)&&kn(e,n,t[n]);if(En)for(var n of En(t))ti.call(t,n)&&kn(e,n,t[n]);return e};const Pn=20;class vt{activate(t){const{nodePositions:n,nodes:r,configs:i,emitter:a,scale:l,svgPanZoom:s}=t,c=v=>{for(const[y,f]of Object.entries(v)){const k=this.getOrCreateNodePosition(n,y);this.setNodePosition(k,f)}},d=v=>{const y=v.filter(E=>!(E in n.value)),f=s.getViewArea(),k=l.value;for(const E of y){const w=r.value[E],h=ln(w,i.node,k),g=ni({},f.center);for(;;){let b=!1;for(const[p,m]of Object.entries(n.value)){if(E===p)continue;const x=r.value[p];if(!x)continue;const S=ln(x,i.node,k);if(b=kr(g,h,m,S),b)break}if(b)g.x+=h.width+Pn*k,g.x+h.width/2>f.box.right&&(g.x=f.center.x,g.y+=h.height+Pn*k);else break}const P=this.getOrCreateNodePosition(n,E);this.setNodePosition(P,g)}};d(Object.keys(r.value));const u=o.watch(()=>Object.keys(r.value),d);a.on("node:dragstart",c),a.on("node:pointermove",c),a.on("node:dragend",c),this.onDeactivate=()=>{u(),a.off("node:dragstart",c),a.off("node:pointermove",c),a.off("node:dragend",c)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=wn(n.x,3),t.value.y=wn(n.y,3)}getOrCreateNodePosition(t,n){const r=o.toRef(t.value,n);return r.value||(r.value={x:0,y:0}),r}}function oi(){this.__data__=[],this.size=0}function Ae(e,t){return e===t||e!==e&&t!==t}function Xe(e,t){for(var n=e.length;n--;)if(Ae(e[n][0],t))return n;return-1}var ri=Array.prototype,ii=ri.splice;function ai(e){var t=this.__data__,n=Xe(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ii.call(t,n,1),--this.size,!0}function si(e){var t=this.__data__,n=Xe(t,e);return n<0?void 0:t[n][1]}function li(e){return Xe(this.__data__,e)>-1}function ci(e,t){var n=this.__data__,r=Xe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function se(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}se.prototype.clear=oi,se.prototype.delete=ai,se.prototype.get=si,se.prototype.has=li,se.prototype.set=ci;function ui(){this.__data__=new se,this.size=0}function di(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function fi(e){return this.__data__.get(e)}function hi(e){return this.__data__.has(e)}var pi="[object AsyncFunction]",gi="[object Function]",mi="[object GeneratorFunction]",vi="[object Proxy]";function yt(e){if(!ie(e))return!1;var t=ye(e);return t==gi||t==mi||t==pi||t==vi}var yi=ne["__core-js_shared__"];const bt=yi;var xn=function(){var e=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function bi(e){return!!xn&&xn in e}var wi=Function.prototype,Ei=wi.toString;function we(e){if(e!=null){try{return Ei.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ki=/[\\^$.*+?()[\]{}|]/g,Pi=/^\[object .+?Constructor\]$/,xi=Function.prototype,Si=Object.prototype,_i=xi.toString,Oi=Si.hasOwnProperty,Mi=RegExp("^"+_i.call(Oi).replace(ki,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ci(e){if(!ie(e)||bi(e))return!1;var t=yt(e)?Mi:Pi;return t.test(we(e))}function Ti(e,t){return e==null?void 0:e[t]}function Ee(e,t){var n=Ti(e,t);return Ci(n)?n:void 0}var $i=Ee(ne,"Map");const Le=$i;var Bi=Ee(Object,"create");const je=Bi;function zi(){this.__data__=je?je(null):{},this.size=0}function Ii(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ai="__lodash_hash_undefined__",Li=Object.prototype,ji=Li.hasOwnProperty;function Ni(e){var t=this.__data__;if(je){var n=t[e];return n===Ai?void 0:n}return ji.call(t,e)?t[e]:void 0}var Di=Object.prototype,Zi=Di.hasOwnProperty;function Ri(e){var t=this.__data__;return je?t[e]!==void 0:Zi.call(t,e)}var Vi="__lodash_hash_undefined__";function qi(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=je&&t===void 0?Vi:t,this}function ke(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ke.prototype.clear=zi,ke.prototype.delete=Ii,ke.prototype.get=Ni,ke.prototype.has=Ri,ke.prototype.set=qi;function Hi(){this.size=0,this.__data__={hash:new ke,map:new(Le||se),string:new ke}}function Fi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ke(e,t){var n=e.__data__;return Fi(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Wi(e){var t=Ke(this,e).delete(e);return this.size-=t?1:0,t}function Ui(e){return Ke(this,e).get(e)}function Gi(e){return Ke(this,e).has(e)}function Xi(e,t){var n=Ke(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=Hi,Pe.prototype.delete=Wi,Pe.prototype.get=Ui,Pe.prototype.has=Gi,Pe.prototype.set=Xi;var Ki=200;function Yi(e,t){var n=this.__data__;if(n instanceof se){var r=n.__data__;if(!Le||r.length<Ki-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pe(r)}return n.set(e,t),this.size=n.size,this}function le(e){var t=this.__data__=new se(e);this.size=t.size}le.prototype.clear=ui,le.prototype.delete=di,le.prototype.get=fi,le.prototype.has=hi,le.prototype.set=Yi;var Qi=function(){try{var e=Ee(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const Ye=Qi;function wt(e,t,n){t=="__proto__"&&Ye?Ye(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Et(e,t,n){(n!==void 0&&!Ae(e[t],n)||n===void 0&&!(t in e))&&wt(e,t,n)}function Ji(e){return function(t,n,r){for(var i=-1,a=Object(t),l=r(t),s=l.length;s--;){var c=l[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}var ea=Ji();const ta=ea;var Sn=typeof j=="object"&&j&&!j.nodeType&&j,_n=Sn&&typeof module=="object"&&module&&!module.nodeType&&module,na=_n&&_n.exports===Sn,On=na?ne.Buffer:void 0,Mn=On?On.allocUnsafe:void 0;function oa(e,t){if(t)return e.slice();var n=e.length,r=Mn?Mn(n):new e.constructor(n);return e.copy(r),r}var ra=ne.Uint8Array;const Qe=ra;function ia(e){var t=new e.constructor(e.byteLength);return new Qe(t).set(new Qe(e)),t}function aa(e,t){var n=t?ia(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function sa(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Cn=Object.create,la=function(){function e(){}return function(t){if(!ie(t))return{};if(Cn)return Cn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const ca=la;function Tn(e,t){return function(n){return e(t(n))}}var ua=Tn(Object.getPrototypeOf,Object);const $n=ua;var da=Object.prototype;function kt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||da;return e===n}function fa(e){return typeof e.constructor=="function"&&!kt(e)?ca($n(e)):{}}var ha="[object Arguments]";function Bn(e){return de(e)&&ye(e)==ha}var zn=Object.prototype,pa=zn.hasOwnProperty,ga=zn.propertyIsEnumerable,ma=Bn(function(){return arguments}())?Bn:function(e){return de(e)&&pa.call(e,"callee")&&!ga.call(e,"callee")};const Pt=ma;var va=9007199254740991;function In(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=va}function Je(e){return e!=null&&In(e.length)&&!yt(e)}function ya(e){return de(e)&&Je(e)}function ba(){return!1}var An=typeof j=="object"&&j&&!j.nodeType&&j,Ln=An&&typeof module=="object"&&module&&!module.nodeType&&module,wa=Ln&&Ln.exports===An,jn=wa?ne.Buffer:void 0,Ea=jn?jn.isBuffer:void 0,ka=Ea||ba;const et=ka;var Pa="[object Object]",xa=Function.prototype,Sa=Object.prototype,Nn=xa.toString,_a=Sa.hasOwnProperty,Oa=Nn.call(Object);function Ma(e){if(!de(e)||ye(e)!=Pa)return!1;var t=$n(e);if(t===null)return!0;var n=_a.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Nn.call(n)==Oa}var Ca="[object Arguments]",Ta="[object Array]",$a="[object Boolean]",Ba="[object Date]",za="[object Error]",Ia="[object Function]",Aa="[object Map]",La="[object Number]",ja="[object Object]",Na="[object RegExp]",Da="[object Set]",Za="[object String]",Ra="[object WeakMap]",Va="[object ArrayBuffer]",qa="[object DataView]",Ha="[object Float32Array]",Fa="[object Float64Array]",Wa="[object Int8Array]",Ua="[object Int16Array]",Ga="[object Int32Array]",Xa="[object Uint8Array]",Ka="[object Uint8ClampedArray]",Ya="[object Uint16Array]",Qa="[object Uint32Array]",V={};V[Ha]=V[Fa]=V[Wa]=V[Ua]=V[Ga]=V[Xa]=V[Ka]=V[Ya]=V[Qa]=!0,V[Ca]=V[Ta]=V[Va]=V[$a]=V[qa]=V[Ba]=V[za]=V[Ia]=V[Aa]=V[La]=V[ja]=V[Na]=V[Da]=V[Za]=V[Ra]=!1;function Ja(e){return de(e)&&In(e.length)&&!!V[ye(e)]}function es(e){return function(t){return e(t)}}var Dn=typeof j=="object"&&j&&!j.nodeType&&j,Ne=Dn&&typeof module=="object"&&module&&!module.nodeType&&module,ts=Ne&&Ne.exports===Dn,xt=ts&&cn.process,ns=function(){try{var e=Ne&&Ne.require&&Ne.require("util").types;return e||xt&&xt.binding&&xt.binding("util")}catch(t){}}();const Zn=ns;var Rn=Zn&&Zn.isTypedArray,os=Rn?es(Rn):Ja;const St=os;function _t(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var rs=Object.prototype,is=rs.hasOwnProperty;function as(e,t,n){var r=e[t];(!(is.call(e,t)&&Ae(r,n))||n===void 0&&!(t in e))&&wt(e,t,n)}function ss(e,t,n,r){var i=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;c===void 0&&(c=e[s]),i?wt(n,s,c):as(n,s,c)}return n}function ls(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var cs=9007199254740991,us=/^(?:0|[1-9]\d*)$/;function Vn(e,t){var n=typeof e;return t=t==null?cs:t,!!t&&(n=="number"||n!="symbol"&&us.test(e))&&e>-1&&e%1==0&&e<t}var ds=Object.prototype,fs=ds.hasOwnProperty;function qn(e,t){var n=be(e),r=!n&&Pt(e),i=!n&&!r&&et(e),a=!n&&!r&&!i&&St(e),l=n||r||i||a,s=l?ls(e.length,String):[],c=s.length;for(var d in e)(t||fs.call(e,d))&&!(l&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Vn(d,c)))&&s.push(d);return s}function hs(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var ps=Object.prototype,gs=ps.hasOwnProperty;function ms(e){if(!ie(e))return hs(e);var t=kt(e),n=[];for(var r in e)r=="constructor"&&(t||!gs.call(e,r))||n.push(r);return n}function Hn(e){return Je(e)?qn(e,!0):ms(e)}function vs(e){return ss(e,Hn(e))}function ys(e,t,n,r,i,a,l){var s=_t(e,n),c=_t(t,n),d=l.get(c);if(d){Et(e,n,d);return}var u=a?a(s,c,n+"",e,t,l):void 0,v=u===void 0;if(v){var y=be(c),f=!y&&et(c),k=!y&&!f&&St(c);u=c,y||f||k?be(s)?u=s:ya(s)?u=sa(s):f?(v=!1,u=oa(c,!0)):k?(v=!1,u=aa(c,!0)):u=[]:Ma(c)||Pt(c)?(u=s,Pt(s)?u=vs(s):(!ie(s)||yt(s))&&(u=fa(c))):v=!1}v&&(l.set(c,u),i(u,c,r,a,l),l.delete(c)),Et(e,n,u)}function Fn(e,t,n,r,i){e!==t&&ta(t,function(a,l){if(i||(i=new le),ie(a))ys(e,t,l,n,Fn,r,i);else{var s=r?r(_t(e,l),a,l+"",e,t,i):void 0;s===void 0&&(s=a),Et(e,l,s)}},Hn)}function Wn(e){return e}function bs(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Un=Math.max;function ws(e,t,n){return t=Un(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Un(r.length-t,0),l=Array(a);++i<a;)l[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(l),bs(e,this,s)}}function Es(e){return function(){return e}}var ks=Ye?function(e,t){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:Es(t),writable:!0})}:Wn;const Ps=ks;var xs=800,Ss=16,_s=Date.now;function Os(e){var t=0,n=0;return function(){var r=_s(),i=Ss-(r-n);if(n=r,i>0){if(++t>=xs)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Ms=Os(Ps);const Cs=Ms;function Ts(e,t){return Cs(ws(e,t,Wn),e+"")}function Gn(e,t,n){if(!ie(n))return!1;var r=typeof t;return(r=="number"?Je(n)&&Vn(t,n.length):r=="string"&&t in n)?Ae(n[t],e):!1}function $s(e){return Ts(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,l&&Gn(n[0],n[1],l)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}var Bs=$s(function(e,t,n){Fn(e,t,n)});const Xn=Bs;function Kn(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",autoPanOnResize:!0,layoutHandler:new vt,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:e=>{const t=/Mac OS/.test(navigator.userAgent)?e.metaKey:e.ctrlKey;return e.type==="keydown"?t:!t}}},node:We(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>O.value(e.normal.type,t),radius:t=>{var n;return((n=O.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=O.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=O.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=O.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>O.value(e.normal.strokeWidth,t),strokeColor:t=>O.value(e.normal.strokeColor,t),strokeDasharray:t=>O.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:$.SOUTH,text:"name"},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:We(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>O.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>O.value(e.normal.dasharray,t),linecap:t=>O.value(e.normal.linecap,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selected:{width:t=>O.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=O.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>O.value(e.normal.linecap,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:We(e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:o.reactive({width:6,color:t=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],r=t.edges.map(i=>i.split("").reduce((a,l)=>(a=(a<<5)-a+l.charCodeAt(0),a&a),0)).reduce((i,a)=>i+a,0);return n[Math.abs(r)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>O.value(e.path.width,t),color:t=>O.value(e.path.color,t),dasharray:t=>O.value(e.path.dasharray,t),linecap:t=>O.value(e.path.linecap,t),linejoin:t=>O.value(e.path.linejoin,t),animate:t=>O.value(e.path.animate,t),animationSpeed:t=>O.value(e.path.animationSpeed,t)},hover:{width:t=>O.value(e.normal.width,t)+2,color:t=>O.value(e.normal.color,t),dasharray:t=>O.value(e.normal.dasharray,t),linecap:t=>O.value(e.normal.linecap,t),linejoin:t=>O.value(e.normal.linejoin,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selected:{width:t=>O.value(e.normal.width,t)+2,color:t=>O.value(e.normal.color,t),dasharray:"6 12",linecap:t=>O.value(e.normal.linecap,t),linejoin:t=>O.value(e.normal.linejoin,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}function zs(e){const t=Kn();return e&&Xn(t,e),t}const Yn=Symbol("style");function Is(e){const t=o.reactive(Kn()),n=Object.keys(t);for(const r of n)o.watch(()=>e.value[r],()=>{Xn(t[r],e.value[r]||{})},{immediate:!0,deep:!0});return o.provide(Yn,t),t}function tt(e){return R(o.inject(Yn),`Configs(${e})`)[e]}function As(){return tt("view")}function Qn(){return tt("node")}function De(){return tt("edge")}function Jn(){return tt("path")}let Ls=1;function js(){return Ls++}var Ns="__lodash_hash_undefined__";function Ds(e){return this.__data__.set(e,Ns),this}function Zs(e){return this.__data__.has(e)}function nt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Pe;++t<n;)this.add(e[t])}nt.prototype.add=nt.prototype.push=Ds,nt.prototype.has=Zs;function Rs(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Vs(e,t){return e.has(t)}var qs=1,Hs=2;function eo(e,t,n,r,i,a){var l=n&qs,s=e.length,c=t.length;if(s!=c&&!(l&&c>s))return!1;var d=a.get(e),u=a.get(t);if(d&&u)return d==t&&u==e;var v=-1,y=!0,f=n&Hs?new nt:void 0;for(a.set(e,t),a.set(t,e);++v<s;){var k=e[v],E=t[v];if(r)var w=l?r(E,k,v,t,e,a):r(k,E,v,e,t,a);if(w!==void 0){if(w)continue;y=!1;break}if(f){if(!Rs(t,function(h,g){if(!Vs(f,g)&&(k===h||i(k,h,n,r,a)))return f.push(g)})){y=!1;break}}else if(!(k===E||i(k,E,n,r,a))){y=!1;break}}return a.delete(e),a.delete(t),y}function Fs(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Ws(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Us=1,Gs=2,Xs="[object Boolean]",Ks="[object Date]",Ys="[object Error]",Qs="[object Map]",Js="[object Number]",el="[object RegExp]",tl="[object Set]",nl="[object String]",ol="[object Symbol]",rl="[object ArrayBuffer]",il="[object DataView]",to=ue?ue.prototype:void 0,Ot=to?to.valueOf:void 0;function al(e,t,n,r,i,a,l){switch(n){case il:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rl:return!(e.byteLength!=t.byteLength||!a(new Qe(e),new Qe(t)));case Xs:case Ks:case Js:return Ae(+e,+t);case Ys:return e.name==t.name&&e.message==t.message;case el:case nl:return e==t+"";case Qs:var s=Fs;case tl:var c=r&Us;if(s||(s=Ws),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;r|=Gs,l.set(e,t);var u=eo(s(e),s(t),r,i,a,l);return l.delete(e),u;case ol:if(Ot)return Ot.call(e)==Ot.call(t)}return!1}function sl(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ll(e,t,n){var r=t(e);return be(e)?r:sl(r,n(e))}function cl(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var l=e[n];t(l,n,e)&&(a[i++]=l)}return a}function ul(){return[]}var dl=Object.prototype,fl=dl.propertyIsEnumerable,no=Object.getOwnPropertySymbols,hl=no?function(e){return e==null?[]:(e=Object(e),cl(no(e),function(t){return fl.call(e,t)}))}:ul;const pl=hl;var gl=Tn(Object.keys,Object);const ml=gl;var vl=Object.prototype,yl=vl.hasOwnProperty;function bl(e){if(!kt(e))return ml(e);var t=[];for(var n in Object(e))yl.call(e,n)&&n!="constructor"&&t.push(n);return t}function wl(e){return Je(e)?qn(e):bl(e)}function oo(e){return ll(e,wl,pl)}var El=1,kl=Object.prototype,Pl=kl.hasOwnProperty;function xl(e,t,n,r,i,a){var l=n&El,s=oo(e),c=s.length,d=oo(t),u=d.length;if(c!=u&&!l)return!1;for(var v=c;v--;){var y=s[v];if(!(l?y in t:Pl.call(t,y)))return!1}var f=a.get(e),k=a.get(t);if(f&&k)return f==t&&k==e;var E=!0;a.set(e,t),a.set(t,e);for(var w=l;++v<c;){y=s[v];var h=e[y],g=t[y];if(r)var P=l?r(g,h,y,t,e,a):r(h,g,y,e,t,a);if(!(P===void 0?h===g||i(h,g,n,r,a):P)){E=!1;break}w||(w=y=="constructor")}if(E&&!w){var b=e.constructor,p=t.constructor;b!=p&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof p=="function"&&p instanceof p)&&(E=!1)}return a.delete(e),a.delete(t),E}var Sl=Ee(ne,"DataView");const Mt=Sl;var _l=Ee(ne,"Promise");const Ct=_l;var Ol=Ee(ne,"Set");const Tt=Ol;var Ml=Ee(ne,"WeakMap");const $t=Ml;var ro="[object Map]",Cl="[object Object]",io="[object Promise]",ao="[object Set]",so="[object WeakMap]",lo="[object DataView]",Tl=we(Mt),$l=we(Le),Bl=we(Ct),zl=we(Tt),Il=we($t),xe=ye;(Mt&&xe(new Mt(new ArrayBuffer(1)))!=lo||Le&&xe(new Le)!=ro||Ct&&xe(Ct.resolve())!=io||Tt&&xe(new Tt)!=ao||$t&&xe(new $t)!=so)&&(xe=function(e){var t=ye(e),n=t==Cl?e.constructor:void 0,r=n?we(n):"";if(r)switch(r){case Tl:return lo;case $l:return ro;case Bl:return io;case zl:return ao;case Il:return so}return t});const co=xe;var Al=1,uo="[object Arguments]",fo="[object Array]",ot="[object Object]",Ll=Object.prototype,ho=Ll.hasOwnProperty;function jl(e,t,n,r,i,a){var l=be(e),s=be(t),c=l?fo:co(e),d=s?fo:co(t);c=c==uo?ot:c,d=d==uo?ot:d;var u=c==ot,v=d==ot,y=c==d;if(y&&et(e)){if(!et(t))return!1;l=!0,u=!1}if(y&&!u)return a||(a=new le),l||St(e)?eo(e,t,n,r,i,a):al(e,t,c,n,r,i,a);if(!(n&Al)){var f=u&&ho.call(e,"__wrapped__"),k=v&&ho.call(t,"__wrapped__");if(f||k){var E=f?e.value():e,w=k?t.value():t;return a||(a=new le),i(E,w,n,r,a)}}return y?(a||(a=new le),xl(e,t,n,r,i,a)):!1}function po(e,t,n,r,i){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:jl(e,t,n,r,po,i)}function Se(e,t){return po(e,t)}function Q(e){return Object.entries(e)}function Bt(e,t){const n=new Set(Object.keys(e));Q(t).forEach(([r,i])=>{Se(e[r],i)||(e[r]=i),n.delete(r)}),n.forEach(r=>delete e[r])}function Nl(e,t,n){const r=ve({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return o.watchEffect(()=>{const{edgeLayoutPoints:i,edgeGroups:a}=Zl(n,e.value,t.value);Bt(r.edgeLayoutPoints,i),Bt(r.edgeGroups,a)}),o.watchEffect(()=>{const i={};for(const[a,{edges:l,groupWidth:s}]of Object.entries(r.edgeGroups)){let c=!1;if(s==0)c=!1;else if(n.edge.summarize instanceof Function){const d=n.edge.summarize(l,n);d===null?c=go(e.value,l,n,s):c=d}else n.edge.summarize?c=go(e.value,l,n,s):c=!1;r.edgeGroups[a].summarize=c,c&&Object.keys(l).forEach(d=>i[d]=!0)}Bt(r.summarizedEdges,i)}),r}function Dl(e,t,n,r,i,a){return e?t?mo(e.edge,n,r,i,0,0,a):mo(e.edge,n,r,i,e.groupWidth,e.pointInGroup,a):{p1:{x:0,y:0},p2:{x:0,y:0}}}function Zl(e,t,n){const r={},i={},a={};for(const[s,c]of Object.entries(n)){if(!(c.source in t&&c.target in t))continue;const d=[c.source,c.target].sort().join("<=>"),u=a[d]||{};u[s]=c,a[d]=u}const l=e.edge.gap instanceof Function?e.edge.gap:(s,c)=>e.edge.gap;for(const[s,c]of Object.entries(a)){const d=Object.keys(c).length;if(d==0)continue;const u=l(c,e),[v,y]=Object.entries(c)[0];if(d===1)r[v]={edge:y,pointInGroup:0,groupWidth:0},i[s]={edges:c,groupWidth:0,summarize:!1};else{let f=0;const k=Object.entries(c).map(([h,g])=>{let P=O.value(e.edge.normal.width,g);return isNaN(+P)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",h,P),P=1),P/2}),E=Object.entries(c).map(([h,g],P)=>(P>0&&(f+=k[P-1]+u+k[P]),[h,g,f])),w=f;E.forEach(([h,g,P])=>{r[h]={edge:g,pointInGroup:P,groupWidth:w}}),i[s]={edges:c,groupWidth:w,summarize:!1}}}return{edgeLayoutPoints:r,edgeGroups:i}}function go(e,t,n,r){if(Object.entries(t).length===1)return!1;const a=Math.min(...Object.values(t).flatMap(l=>[e[l.source],e[l.target]]).filter(l=>l).map(l=>{const s=O.values(n.node.normal,l);return s.type==="circle"?s.radius*2:Math.min(s.width,s.height)}));return r>a}function mo(e,t,n,r,i,a,l){var s,c,d,u,v,y,f,k;let E,w,h,g;return e.source<e.target?[E,w,h,g]=vo((s=t==null?void 0:t.x)!=null?s:0,(c=t==null?void 0:t.y)!=null?c:0,(d=n==null?void 0:n.x)!=null?d:0,(u=n==null?void 0:n.y)!=null?u:0,r,i,a,l):[h,g,E,w]=vo((v=n==null?void 0:n.x)!=null?v:0,(y=n==null?void 0:n.y)!=null?y:0,(f=t==null?void 0:t.x)!=null?f:0,(k=t==null?void 0:t.y)!=null?k:0,r,i,a,l),{p1:{x:E,y:w},p2:{x:h,y:g}}}function vo(e,t,n,r,i,a,l,s){const c=n-e,d=r-t;let u=(a/2-l)*i;if(u!==0&&s!=="clock"){const v=Math.atan2(r-t,n-e);if(s==="vertical"){const y=Math.PI/2;(v<-y||v>=y)&&(u*=-1)}else s==="horizontal"&&v<0&&(u*=-1)}if(c===0){const v=d<0?-1:1;return[e+u*v,t,n+u*v,r]}else if(d===0){const v=c<0?1:-1;return[e,t+u*v,n,r+u*v]}else{const v=d/c,y=-1/v;d<0&&(u=-u);const f=u/Math.sqrt(1+Math.pow(y,2));return[e+f,t+f*y,n+f,r+f*y]}}function yo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function bo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function wo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function Eo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function zt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function ko(e,t){return e.x*t.x+e.y*t.y}function Po(e,t){return e.x*t.y-e.y*t.x}function It(e){return e.x*e.x+e.y*e.y}function At(e){return Math.sqrt(It(e))}function Lt(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function xo(e,t){return Math.sqrt(Lt(e,t))}function So(e,t){t||(t={x:0,y:0});const n=At(e);return n===0?(t.x=1,t.y=0):zt(e,{x:n,y:n},t),t}function rt(e,t,n){n||(n={x:0,y:0});const r=e.x*Math.cos(t)-e.y*Math.sin(t),i=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=r,n.y=i,n}const Rl=180/Math.PI;function Vl(e){return e*Rl}function jt(e){return Math.atan2(e.y,e.x)}function _o(e){return Vl(jt(e))}const ql=Object.freeze(Object.defineProperty({__proto__:null,add:yo,subtract:bo,multiply:wo,multiplyScalar:Eo,divide:zt,dot:ko,cross:Po,lengthSquared:It,length:At,distanceSquared:Lt,distance:xo,normalize:So,rotate:rt,angle:jt,angleDegree:_o},Symbol.toStringTag,{value:"Module"}));class z{static fromArray(t){return new z(t[0]||0,t[1]||0)}static fromObject(t){return new z(t.x,t.y)}constructor(t,n){this.x=t,this.y=n}add(t){return yo(this,t,this)}subtract(t){return bo(this,t,this)}multiply(t){return wo(this,t,this)}multiplyScalar(t){return Eo(this,t,this)}divide(t){return zt(this,t,this)}dot(t){return ko(this,t)}cross(t){return Po(this,t)}lengthSquared(){return It(this)}length(){return At(this)}distanceSquared(t){return Lt(this,t)}distance(t){return xo(this,t)}normalize(){return So(this,this)}angle(){return jt(this)}angleDegree(){return _o(this)}rotate(t){return rt(this,t,this)}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new z(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}var Hl=Object.defineProperty,Oo=Object.getOwnPropertySymbols,Fl=Object.prototype.hasOwnProperty,Wl=Object.prototype.propertyIsEnumerable,Mo=(e,t,n)=>t in e?Hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ul=(e,t)=>{for(var n in t||(t={}))Fl.call(t,n)&&Mo(e,n,t[n]);if(Oo)for(var n of Oo(t))Wl.call(t,n)&&Mo(e,n,t[n]);return e};const F=Ul({Vector2D:z},ql);class q{constructor(t,n,r){this.source=t,this.target=n,this.v=r}static fromLinePosition(t){const n=z.fromObject(t.p1),r=z.fromObject(t.p2);return new q(n,r,Me(n,r))}static fromPositions(t,n){const r=z.fromObject(t),i=z.fromObject(n);return new q(r,i,Me(r,i))}static fromVectors(t,n){return new q(t,n,Me(t,n))}}function Me(e,t){return t.clone().subtract(e)}function Gl(e){return[z.fromObject(e.p1),z.fromObject(e.p2)]}function Xl(e){return new z((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}function it(e,t){return{p1:e,p2:t}}function Nt(e,t,n){const r=q.fromLinePosition(e);return Kl(r,t,n)}function Kl(e,t,n){const r=e.v.clone().normalize(),i=e.source.clone().add(r.clone().multiplyScalar(t)),a=e.target.clone().subtract(r.clone().multiplyScalar(n));let l=i.toObject(),s=a.toObject();const c=Me(i,a);if(e.v.angle()*c.angle()<0){const d=new z((l.x+s.x)/2,(l.y+s.y)/2),u=d.clone().add(r.multiplyScalar(.5));l=d.toObject(),s=u.toObject()}return{p1:l,p2:s}}function Yl(e){return{p1:e.p2,p2:e.p1}}function Ze(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return q.fromVectors(e.target,e.target.clone().add(t))}var ce=Math.pow;function Dt(e,t){const n=t.v.clone().normalize(),r=t.source,i=F.subtract(e,r),a=n.dot(i);return r.clone().add(n.multiplyScalar(a))}function at(e,t,n,r){if(!(F.lengthSquared(F.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const l=q.fromVectors(e,t),s=Dt(n,l),c=F.length(F.subtract(s,n));if(r<c)return null;if(r===c)return s;const d=Math.sqrt(ce(r,2)-ce(c,2)),u=l.v.normalize().multiplyScalar(d);return s.subtract(u)}function Ql(e,t,n,r,i){if(!(F.lengthSquared(F.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const s=q.fromVectors(e,t),c=Dt(n,s),d=F.length(F.subtract(c,n));if(r<d)return null;if(r===d)return c;const u=Math.sqrt(ce(r,2)-ce(d,2)),v=s.v.normalize().multiplyScalar(u),y=c.clone().add(v),f=c.clone().subtract(v),k=i.distance(y),E=i.distance(f);return Math.abs(k-E)<2?f:k<E?y:f}function _e(e,t){const n=F.subtract(t.source,e.source),r=e.v,i=t.v,a=F.cross(n,r)/F.cross(r,i);return t.source.clone().add(i.clone().multiplyScalar(a))}function Re(e,t,n,r,i){const a=e,s=n.clone().subtract(a),c=s.length(),d=t+r;if(d<c)return null;const u=Math.abs(t-r);if(c<u)return null;if(c===d){const m=s.clone().normalize(),x=e.clone().add(m.multiplyScalar(t));return i?x:[x,x]}if(c===u){const m=s.clone().normalize(),x=t>r,S=e.clone().add(m.multiplyScalar(x?t:-t));return i?S:[S,S]}const v=t,y=r,f=(ce(c,2)+ce(v,2)-ce(y,2))/(2*c*v),k=v*f,E=Math.sqrt(ce(v,2)-ce(k,2)),w=s.clone().normalize(),h=new z(-w.y,w.x),g=w.clone().multiplyScalar(k),P=h.clone().multiplyScalar(E),b=e.clone().add(g).add(P),p=e.clone().add(g).subtract(P);if(i){const m=b.distance(i),x=p.distance(i);return m<x?b:p}else return[b,p]}var st=Math.pow;function Co(e,t,n,r){const i=q.fromPositions(e,t),a=(n.width+n.strokeWidth)/2*r,l=(n.height+n.strokeWidth)/2*r,s=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*r:0,c=(i.v.angle()-Math.PI/2)%Math.PI,d=Math.PI/2-c%Math.PI,u=l*Math.abs(Math.tan(c)),v=a*Math.abs(Math.tan(d)),y=u<=a-s,f=v<=l-s;if(y||f||s===0)return Math.sqrt(y?st(l,2)+st(u,2):st(a,2)+st(v,2));{const k=t.x-a+s,E=t.y-l+s,w=t.x+a-s,h=t.y+l-s,g=[new z(k,E),new z(w,E),new z(w,h),new z(k,h)],P=Math.floor((i.v.angleDegree()+360)%360/90),b=g[P],p=at(i.source,Dt(b,i),b,s);return p?Me(p,i.target).length():Me(b,i.target).length()+s}}function To(e,t,n,r,i){const a=q.fromLinePosition(e),l=a.v.clone().normalize(),s=r===0?a.source:a.source.clone().add(l.clone().multiplyScalar(r*i)),c=r===0?a.target:a.target.clone().subtract(l.clone().multiplyScalar(r*i)),d=(t.width/2+n)*i,u=new z(-l.y,l.x).multiplyScalar(d);let v=F.subtract(s,u),y=F.add(s,u),f=F.subtract(c,u),k=F.add(c,u);const E=a.v.angleDegree();return(E<-90||E>=90)&&([v,y]=[y,v],[f,k]=[k,f]),{source:{above:v,below:y},target:{above:f,below:k}}}function Jl(e,t,n,r){let i;n.type==="circle"?i=n.radius+n.strokeWidth/2:i=Co(t,e,n,1);let a;return r.type==="circle"?a=r.radius+r.strokeWidth/2:a=Co(e,t,r,1),[i,a]}function fe(e,t,n){const{x:r,y:i}=e,a=r-t.x,l=i-t.y;return{x:a*Math.cos(n)-l*Math.sin(n)+t.x,y:a*Math.sin(n)+l*Math.cos(n)+t.y}}function Zt(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function Rt(e,t,n,r){const i=[],a=q.fromVectors(t,e),l=q.fromVectors(t,n);let s=Ce(a,l);r*s<0&&(s=Zt(s));const c=z.fromObject(fe(e,t,-s/2)),d=q.fromVectors(t,c),u=Ze(d),v=Ce(a,d);let y=Ze(a);if(Math.abs(v)<Math.PI/2){const k=_e(y,u);i.push(k)}else{const k=z.fromObject(fe(c,t,v/2)),E=Ze(q.fromVectors(t,z.fromObject(k))),w=_e(y,E),h=_e(E,u);i.push(w,k,h)}i.push(c);const f=Ce(l,d);if(y=Ze(l),Math.abs(f)<Math.PI/2){const k=_e(y,u);i.push(k)}else{const k=z.fromObject(fe(c,t,f/2)),E=Ze(q.fromVectors(t,z.fromObject(k))),w=_e(u,E),h=_e(E,y);i.push(w,k,h)}return i}function Ce(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function ec(e,t,n){const r=e.x,i=e.y,a=t.x,l=t.y,s=n.x,c=n.y,d=r-a,u=i-l,v=s-a,y=c-l,f=(y*(d*(r+a)+u*(i+l))-u*(v*(s+a)+y*(c+l)))/(2*d*y-2*u*v),k=(-v*(d*(r+a)+u*(i+l))+d*(v*(s+a)+y*(c+l)))/(2*d*y-2*u*v),E=Math.sqrt(Math.pow(r-f,2)+Math.pow(i-k,2));return[new z(f,k),E]}function Te(e){return e.type=="circle"?e.radius:Math.min(e.width,e.height)/2}function tc(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}var nc=Object.defineProperty,oc=Object.defineProperties,rc=Object.getOwnPropertyDescriptors,$o=Object.getOwnPropertySymbols,ic=Object.prototype.hasOwnProperty,ac=Object.prototype.propertyIsEnumerable,Bo=(e,t,n)=>t in e?nc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sc=(e,t)=>{for(var n in t||(t={}))ic.call(t,n)&&Bo(e,n,t[n]);if($o)for(var n of $o(t))ac.call(t,n)&&Bo(e,n,t[n]);return e},lc=(e,t)=>oc(e,rc(t));function cc(){return{markers:o.reactive({}),referenceCount:{}}}function uc(e){const{markers:t,referenceCount:n}=e;function r(s,c){var d;const u=(d=n[s])!=null?d:0;n[s]=u+1,u||(t[s]=c)}function i(s){var c;const d=(c=n[s])!=null?c:0;d&&(d-1===0?(delete t[s],delete n[s]):n[s]=d-1)}function a(s){s&&i(s)}function l(s,c,d,u,v){if(s.type==="none"){a(d);return}if(s.type==="custom")return a(d),s.customId;const y=dc(s,c,u),f=fc(y,v);return f===d||(a(d),r(f,y)),f}return{makeMarker:l,clearMarker:a}}function dc(e,t,n){var r;return lc(sc({},e),{color:(r=e.color)!=null?r:n,isSource:t})}function fc(e,t){const n=tc(e.color),r=e.isSource?"L":"R",i=e.units==="strokeWidth"?"rel":"abs";return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${n}_${r}_${i}`}function Vt(e,t,n,r,i,a,l){const s=o.reactive({});o.watch(()=>new Set(Object.keys(e.value)),(d,u)=>{u||(u=new Set([]));for(const v of d)u.has(v)||hc(e,s,v,!1,t,i);for(const v of u)d.has(v)||(n.delete(v),r.delete(v),a==null||a(v,s[v]),delete s[v])},{immediate:!0}),o.watch(()=>[...n],(d,u)=>{const v=u?d.filter(f=>!u.includes(f)):d,y=u?u.filter(f=>!d.includes(f)):[];v.forEach(f=>{const k=s[f];k&&!k.selected&&(k.selected=!0)}),y.forEach(f=>{const k=s[f];k&&k.selected&&(k.selected=!1)})},{immediate:!0}),o.watch(()=>[...r],(d,u)=>{const v=d.filter(f=>!u.includes(f)),y=u.filter(f=>!d.includes(f));v.forEach(f=>{const k=s[f];k&&!k.hovered&&(k.hovered=!0)}),y.forEach(f=>{const k=s[f];k&&k.hovered&&(k.hovered=!1)})});const c=o.computed(()=>{const d=l?l():Object.values(s);return t.zOrder.enabled?pc(d,t.zOrder,r,n):d});return{states:s,zOrderedList:c}}function hc(e,t,n,r,i,a){const l={id:n,selected:r,hovered:!1,selectable:o.computed(()=>e.value[n]?O.value(i.selectable,e.value[n]):o.unref(l.selectable)),zIndex:o.computed(()=>e.value[n]?O.value(i.zOrder.zIndex,e.value[n]):o.unref(l.zIndex))};t[n]=l,a(e,n,t[n])}function pc(e,t,n,r){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort((i,a)=>{const l=n.has(i.id),s=n.has(a.id);if(l!=s)return l?1:-1;const c=r.has(i.id),d=r.has(a.id);return c!=d?c?1:-1:i.zIndex-a.zIndex}):t.bringToFrontOnHover?e.sort((i,a)=>{const l=n.has(i.id),s=n.has(a.id);return l!=s?l?1:-1:i.zIndex-a.zIndex}):t.bringToFrontOnSelected?e.sort((i,a)=>{const l=r.has(i.id),s=r.has(a.id);return l!=s?l?1:-1:i.zIndex-a.zIndex}):e.sort((i,a)=>i.zIndex-a.zIndex)}function qt(e,t,n){return{objects:e,selected:t,hovered:n}}const zo=Symbol("states"),gc={type:"none",width:0,height:0,margin:0,units:"strokeWidth",color:null};function mc(e,t,n,r,i,a,l){const s=o.reactive({}),{states:c,zOrderedList:d}=Vt(e.objects,r.node,e.selected,e.hovered,(g,P,b)=>{bc(g,P,b,r.node)},(g,P)=>{const b=i.nodes;delete b[g]}),u=js(),v=Nl(e.objects,t.objects,r),y=o.ref([]),{states:f,zOrderedList:k}=Vt(t.objects,r.edge,t.selected,t.hovered,(g,P,b)=>{Ec(g,P,b,r.edge,a,c,v,i,l,u)},(g,P)=>{var b;(b=P.stopWatchHandle)==null||b.call(P)},()=>y.value);o.watchEffect(()=>{y.value=kc(v.edgeGroups,f)}),o.watch(v.edgeGroups,g=>Sc(s,v,r),{immediate:!0});const{states:E,zOrderedList:w}=Vt(n.objects,r.path,n.selected,n.hovered,(g,P,b)=>{const p=b;p.clickable=o.computed(()=>g.value[P]?O.value(r.path.clickable,g.value[P]):!1),p.hoverable=o.computed(()=>g.value[P]?O.value(r.path.hoverable,g.value[P]):!1),p.path=g.value[P],p.edges=o.computed(()=>g.value[P].edges.map(x=>({edgeId:x,edge:t.objects.value[x]})).filter(x=>x.edge))}),h={nodeStates:c,edgeStates:f,edgeGroupStates:v,summarizedEdgeStates:s,pathStates:E,layouts:i,nodeZOrderedList:d,edgeZOrderedList:k,pathZOrderedList:w};return o.provide(zo,h),h}function vc(e){return e.summarized}function $e(){return R(o.inject(zo),"states")}function yc(e,t,n,r){return n&&r.hover?O.values(r.hover,e):Io(e,t,r)}function Io(e,t,n){return t&&n.selected?O.values(n.selected,e):O.values(n.normal,e)}function bc(e,t,n,r){n.shape=o.computed(()=>e.value[t]?yc(e.value[t],n.selected,n.hovered,r):o.unref(n.shape)),n.staticShape=o.computed(()=>e.value[t]?Io(e.value[t],n.selected,r):o.unref(n.staticShape)),n.label=o.computed(()=>e.value[t]?O.values(r.label,e.value[t]):o.unref(n.label)),n.labelText=o.computed(()=>{var i,a;return r.label.text instanceof Function?o.unref(n.label).text:e.value[t]?(a=(i=e.value[t])==null?void 0:i[o.unref(n.label).text])!=null?a:"":o.unref(n.labelText)}),n.draggable=o.computed(()=>e.value[t]?O.value(r.draggable,e.value[t]):o.unref(n.draggable))}function wc(e,t,n,r){return t?O.values(r.selected,e):n&&r.hover?O.values(r.hover,e):O.values(r.normal,e)}function Ao(e){return e.type==="none"?gc:e}function Ec(e,t,n,r,i,a,l,s,c,d){const{makeMarker:u,clearMarker:v}=uc(i);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}});const y=o.computed(()=>{const h=e.value[t],g=wc(h,n.selected,n.hovered,r);isNaN(+g.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,g.width),g.width=1),(g.color===void 0||g.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",t,g.color),g.color="#000000");let P=O.value(r.normal.width,h);isNaN(+P)&&(P=1);const b=Ao(O.values(r.marker.source,[h,g])),p=Ao(O.values(r.marker.target,[h,g]));return{stroke:g,normalWidth:P,source:b,target:p}});n.line=y;const f=o.toRef(l.edgeLayoutPoints,t),k=o.toRef(l.summarizedEdges,t),E=o.watchEffect(()=>{var h,g,P,b,p;const m=e.value[t];if(!m)return;const x=s.nodes[m==null?void 0:m.source],S=s.nodes[m==null?void 0:m.target],_=(h=a[m.source])==null?void 0:h.staticShape,T=(g=a[m.target])==null?void 0:g.staticShape;if(!x||!S||!_||!T)return;const C=Dl(f.value,(P=k.value)!=null?P:!1,x,S,c.value,r.keepOrder),[B,L]=Jl(x,S,_,T),H=c.value;n.labelPosition=Nt(C,B*H,L*H);let I=0,D=0;const Z=y.value;if(Z.source.type!=="none"){const Y=Z.source;I=Y.margin+Y.width,Y.units==="strokeWidth"&&(I*=Z.normalWidth)}if(Z.target.type!=="none"){const Y=Z.target;D=Y.margin+Y.width,Y.units==="strokeWidth"&&(D*=Z.normalWidth)}r.margin&&(I+=r.margin,D+=r.margin);const K=!!r.margin||Z.source.type!=="none"||Z.target.type!=="none";if(m.source===m.target){n.origin=it(x,S);const Y=O.values(r.selfLoop,m),[Oe,Be]=xc(x,_,Y,K,I,D,(p=(b=f.value)==null?void 0:b.pointInGroup)!=null?p:0,H);n.position=Oe,n.loop=Be,n.curve=void 0;return}else n.loop=void 0;if(K&&(I+=B,D+=L),r.type==="straight")n.origin=C,n.curve=void 0,I===0&&D===0?n.position=n.origin:n.position=Nt(n.origin,I*H,D*H);else{n.origin=it(x,S);const Y=f.value?f.value.groupWidth/2-f.value.pointInGroup:0,[Oe,Be]=Pc(n.origin,C,Y,I*H,D*H);n.position=Oe,n.curve=Be}}),w=o.watchEffect(()=>{!e.value[t]||(n.sourceMarkerId=u(y.value.source,!0,n.sourceMarkerId,y.value.stroke.color,d),n.targetMarkerId=u(y.value.target,!1,n.targetMarkerId,y.value.stroke.color,d))});n.stopWatchHandle=()=>{E(),w(),v(n.sourceMarkerId),v(n.targetMarkerId)}}function kc(e,t){return Object.entries(e).map(([n,r])=>{var i;return r.summarize?{id:(i=Object.keys(r.edges)[0])!=null?i:n,summarized:!0,key:n,group:r,zIndex:Object.keys(r.edges).map(a=>{var l,s;return(s=(l=t[a])==null?void 0:l.zIndex)!=null?s:0}).reduce((a,l)=>Math.max(a,l))}:Object.entries(r.edges).map(([a,l])=>{var s,c;return{id:a,summarized:!1,key:a,edge:l,zIndex:(c=(s=t[a])==null?void 0:s.zIndex)!=null?c:0}})}).flat()}function Pc(e,t,n,r,i){const a=q.fromLinePosition(e),l=q.fromLinePosition(t),s=Xl(t),[c,d]=ec(a.source,a.target,s);let u,v;if(n===0)return r===0&&i===0?u=e:u=Nt(e,r,i),[u,v];const y=q.fromVectors(c,s),f=Ce(q.fromVectors(c,a.source),y);if(r===0&&i===0)u=e;else{let h=r/d,g=i/d;f>0&&(h*=-1,g*=-1),u=it(fe(a.source,c,h),fe(a.target,c,-g));let P=Ce(q.fromVectors(c,a.source),q.fromVectors(c,a.target)),b=Ce(q.fromPositions(c,u.p1),q.fromPositions(c,u.p2));if(f*P<0&&(P=Zt(P),f*b<0&&(b=Zt(b))),P*b<0){const p=s.clone().add(l.v.normalize().multiplyScalar(.5));return u=it(s,p),[u,v]}}const[k,E]=Gl(u),w=Rt(k,c,E,f).map(h=>h.toObject());return v={center:s,theta:f,circle:{center:c,radius:d},control:w},[u,v]}function xc(e,t,n,r,i,a,l,s){const c=s,d=(n.radius+l/2)*c,u=n.offset*c+d,v=(n.angle-90)*(Math.PI/180),y=z.fromObject({x:e.x+u*Math.cos(v),y:e.y+u*Math.sin(v)}),f=n.isClockwise;let k,E;if(r){const b=Re(y,d,z.fromObject(e),Te(t)*c);if(b){[k,E]=b;let p=1;if(f||([k,E]=[E,k],p=-1),i!==0||a!==0){const m=i*c/d*p,x=a*c/d*p;k=fe(k,y,m),E=fe(E,y,-x)}}}if(k===void 0||E===void 0){const b=z.fromObject(e).subtract(y).normalize().multiplyScalar(d);let p=1*(Math.PI/180);f||(p*=-1),k=y.clone().add(rt(b,p)),E=y.clone().add(rt(b,-p))}const w=z.fromObject(k).subtract(y).angleDegree(),P=(z.fromObject(E).subtract(y).angleDegree()+360-w)%360>=180;return[{p1:k,p2:E},{center:y,radius:[d,d],isLargeArc:f?P:!P,isClockwise:f}]}function Sc(e,t,n){const r=t.edgeGroups;Object.entries(r).filter(([i,a])=>a.summarize&&!(i in e)).forEach(([i,a])=>{const l={stroke:void 0};l.stroke=o.computed(()=>O.values(n.edge.summarized.stroke,a.edges)),e[i]=l}),Object.keys(e).forEach(i=>{var a;(a=t.edgeGroups[i])!=null&&a.summarize||delete e[i]})}class Ve{static valueOf(t){return Array.from(t.values())}}const _c=3,Oc=6,Lo=500;function lt(e){return e==="touch"?Oc:_c}function Ht(e,t,n,r){let i=e.get(t);if(i)i.id!==n&&(i=void 0);else{const s=Array.from(e.entries()).find(([c,d])=>d.id===n);if(s){const[c,d]=s;e.delete(c),i=d}}let a,l;return[i,a,l]=jo(i,r,n),e.set(t,i),[a,l]}function jo(e,t,n){const r=Date.now();e&&r-e.lastTime<=Lo?(e.count++,e.lastTime=r):e={count:1,lastTime:r,id:n};const i={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let a,l;return t instanceof PointerEvent?(Object.assign(i,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),a=new PointerEvent("click",i),e.count===2&&(l=new PointerEvent("dblclick",i))):(a=new MouseEvent("click",i),e.count===2&&(l=new MouseEvent("dblclick",i))),[e,a,l]}function Ft(e){const t=Date.now();Array.from(e.entries()).filter(([n,r])=>t-r.lastTime>Lo).map(([n,r])=>e.delete(n))}var Mc=Object.defineProperty,No=Object.getOwnPropertySymbols,Cc=Object.prototype.hasOwnProperty,Tc=Object.prototype.propertyIsEnumerable,Do=(e,t,n)=>t in e?Mc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wt=(e,t)=>{for(var n in t||(t={}))Cc.call(t,n)&&Do(e,n,t[n]);if(No)for(var n of No(t))Tc.call(t,n)&&Do(e,n,t[n]);return e};function $c(e,t,n,r,i,a,l){const s={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},c={pointermove:f,pointerup:E,pointercancel:k};function d(b){const p=s.follow.followedPointerId===b.pointerId,m=i.has(b.nodeId),x=!(b.pointerId in s.pointers);if(p&&x||p&&!m){const S=Ve.valueOf(s.pointers).find(_=>i.has(_.nodeId));if(!S){s.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=S,s.follow.followedPointerId=b.pointerId}else{const S=s.pointers.get(s.follow.followedPointerId);if(!S){s.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=S}if(p||m){const S=Ve.valueOf(s.pointers).map(_=>_.nodeId);s.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter(_=>!S.includes(_)).filter(_=>{var T;return(T=e[_])==null?void 0:T.draggable}).map(_=>[_,Ut(t.nodes,_)])),b.dragBasePosition=Wt({},b.latestPosition),b.nodeBasePosition=Ut(t.nodes,b.nodeId)}}o.watch(i,b=>{const p=s.pointers.get(s.follow.followedPointerId);p&&d(p),b.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":b.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),o.watch(n.selectionMode,b=>{b!=="node"&&i.clear()});function u(b,p){const m=b.dragBasePosition.x-p.pageX,x=b.dragBasePosition.y-p.pageY,S=s.follow.followedPointerId==b.pointerId?Wt({[b.nodeId]:b.nodeBasePosition},s.follow.nodeBasePositions):{[b.nodeId]:b.nodeBasePosition},_=a.value;return Object.fromEntries(Object.entries(S).map(([T,C])=>[T,{x:C.x-m/_,y:C.y-x/_}]))}function v(b,p){var m,x;if(p.isTrusted||p.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const S=(x=(m=e[b])==null?void 0:m.selectable)!=null?x:!1;if(S){const _=Ve.valueOf(s.pointers).filter(T=>i.has(T.nodeId)).length>0;p.shiftKey||_?i.has(b)?i.delete(b):typeof S=="number"&&i.size>=S||i.add(b):i.has(b)||(i.clear(),i.add(b))}l.emit("node:click",{node:b,event:p})}function y(b,p){p.isTrusted||l.emit("node:dblclick",{node:b,event:p})}function f(b){var p;b.stopPropagation();const m=s.pointers.get(b.pointerId);if(!m)return;m.latestPosition={x:b.pageX,y:b.pageY},m.moveCounter++;const x=lt(b.pointerType);if(m.moveCounter<=x||!((p=e[m.nodeId])!=null&&p.draggable))return;if(m.moveCounter===x+1){const _=u(m,{pointerId:m.pointerId,pageX:m.dragBasePosition.x,pageY:m.dragBasePosition.y});l.emit("node:dragstart",_)}const S=u(m,b);l.emit("node:pointermove",S)}function k(b){b.stopPropagation();let p=s.pointers.get(b.pointerId);if(!!p){for(p of s.pointers.values()){const m=p.nodeId,x=lt(b.pointerType);if(p.moveCounter>x){const _=u(p,{pointerId:p.pointerId,pageX:p.latestPosition.x,pageY:p.latestPosition.y});l.emit("node:dragend",_)}l.emit("node:pointerup",{node:m,event:b})}s.pointers.clear(),s.follow={followedPointerId:-1,nodeBasePositions:{}},Q(c).forEach(([m,x])=>{document.removeEventListener(m,x)}),n.viewMode.value="default"}}function E(b){var p,m,x;b.stopPropagation();const S=s.pointers.get(b.pointerId);if(!S)return;s.pointers.delete(b.pointerId);const _=S.nodeId,T=lt(b.pointerType),C=S.moveCounter>T;if(C){if((p=e[S.nodeId])!=null&&p.draggable){const B=u(S,b);l.emit("node:dragend",B),l.emit("node:pointerup",{node:_,event:b})}}else l.emit("node:pointerup",{node:_,event:b});if(!C){const[B,L]=Ht(s.clicks,S.pointerId,_,b);(m=S.eventTarget)==null||m.dispatchEvent(B),L&&((x=S.eventTarget)==null||x.dispatchEvent(L))}s.pointers.size===0?(s.follow={followedPointerId:-1,nodeBasePositions:{}},Q(c).forEach(([B,L])=>{document.removeEventListener(B,L)}),Ft(s.clicks),n.viewMode.value="default"):d(S),r.clear(),s.hoveredNodesPre.forEach(r.add,r)}function w(b,p){if(p.button==2||(p.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;s.pointers.size==0&&(n.viewMode.value="node",Q(c).forEach(([x,S])=>{document.addEventListener(x,S)}));const m={pointerId:p.pointerId,nodeId:b,moveCounter:0,nodeBasePosition:Ut(t.nodes,b),dragBasePosition:{x:p.pageX,y:p.pageY},latestPosition:{x:p.pageX,y:p.pageY},eventTarget:p.currentTarget};s.pointers.set(p.pointerId,m),i.has(b)&&(s.follow.followedPointerId<0?(s.follow.followedPointerId=p.pointerId,d(m)):delete s.follow.nodeBasePositions[m.nodeId]),l.emit("node:pointerdown",{node:b,event:p})}function h(b,p){s.hoveredNodesPre.add(b),!(s.pointers.size>0)&&(r.add(b),l.emit("node:pointerover",{node:b,event:p}))}function g(b,p){s.hoveredNodesPre.delete(b),!(s.pointers.size>0)&&(r.delete(b),l.emit("node:pointerout",{node:b,event:p}))}function P(b,p){p.stopPropagation(),l.emit("node:contextmenu",{node:b,event:p})}return{handleNodePointerDownEvent:w,handleNodePointerOverEvent:h,handleNodePointerOutEvent:g,handleNodeClickEvent:v,handleNodeDoubleClickEvent:y,handleNodeContextMenu:P}}function Ut(e,t){var n;const r=(n=e[t])!=null?n:{x:0,y:0};return Wt({},r)}function Bc(e,t,n,r,i){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map},l={pointerup:c,pointercancel:d};o.watch(r,p=>{p.size>0&&t.selectionMode.value!=="edge"?t.selectionMode.value="edge":p.size===0&&t.selectionMode.value==="edge"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,p=>{p!=="edge"&&r.clear()});function s(p,m){if(m.button==2||(m.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="edge",Q(l).forEach(([S,_])=>{document.addEventListener(S,_)}),a.pointerPeekCount=0),a.pointerPeekCount++;const x={pointerId:m.pointerId,id:p,eventTarget:m.currentTarget};a.pointers.set(m.pointerId,x),i.emit("edge:pointerdown",oe(p,m))}function c(p){var m,x;p.stopPropagation();const S=a.pointers.get(p.pointerId);if(!S)return;a.pointers.delete(p.pointerId);const _=S.id;i.emit("edge:pointerup",oe(_,p));const[T,C]=Ht(a.clicks,S.pointerId,_ instanceof Array?_.join(","):_,p);(m=S.eventTarget)==null||m.dispatchEvent(T),C&&((x=S.eventTarget)==null||x.dispatchEvent(C)),a.pointers.size===0&&(a.pointerPeekCount=0,Q(l).forEach(([B,L])=>{document.removeEventListener(B,L)}),Ft(a.clicks),t.viewMode.value="default")}function d(p){if(p.stopPropagation(),!!a.pointers.get(p.pointerId)){for(const x of a.pointers.values()){const S=x.id;i.emit("edge:pointerup",oe(S,p))}a.pointers.clear(),a.pointerPeekCount=0,Q(l).forEach(([x,S])=>{document.removeEventListener(x,S)}),i.emit("view:mode","default")}}function u(p,m){var x;if(m.isTrusted||m.shiftKey&&!["container","edge"].includes(t.selectionMode.value))return;t.selectionMode.value="edge";const S=p instanceof Array?p:[p],_=Ve.valueOf(a.pointers).filter(T=>(T.id instanceof Array?T.id:[T.id]).every(B=>r.has(B))).length>0;if(p instanceof Array)S.find(C=>{var B;return(B=e[C])==null?void 0:B.selectable})&&(m.shiftKey||_?S.some(C=>r.has(C))?S.forEach(C=>r.delete(C)):S.forEach(C=>{var B;const L=(B=e[C])==null?void 0:B.selectable;typeof L=="number"&&r.size>=L||r.add(C)}):(r.clear(),S.forEach(C=>r.add(C))));else{const T=(x=e[p])==null?void 0:x.selectable;T&&(m.shiftKey||_?r.has(p)?r.delete(p):typeof T=="number"&&r.size>=T||r.add(p):r.has(p)||(r.clear(),r.add(p)))}i.emit("edge:click",oe(p,m))}function v(p,m){m.isTrusted||i.emit("edge:dblclick",oe(p,m))}function y(p,m){n.add(p),i.emit("edge:pointerover",oe(p,m))}function f(p,m){n.delete(p),i.emit("edge:pointerout",oe(p,m))}function k(p,m){m.stopPropagation(),i.emit("edge:contextmenu",oe(p,m))}function E(p,m){if(m.button==2||(m.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="edge",Q(l).forEach(([S,_])=>{document.addEventListener(S,_)}),a.pointerPeekCount=0),a.pointerPeekCount++;const x={pointerId:m.pointerId,id:p,eventTarget:m.currentTarget};a.pointers.set(m.pointerId,x),i.emit("edge:pointerdown",oe(p,m))}function w(p,m){p.forEach(x=>n.add(x)),i.emit("edge:pointerover",oe(p,m))}function h(p,m){p.forEach(x=>n.delete(x)),i.emit("edge:pointerout",oe(p,m))}function g(p,m){u(p,m)}function P(p,m){v(p,m)}function b(p,m){m.stopPropagation(),i.emit("edge:contextmenu",oe(p,m))}return{handleEdgePointerDownEvent:s,handleEdgePointerOverEvent:y,handleEdgePointerOutEvent:f,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:v,handleEdgeContextMenu:k,handleEdgesPointerDownEvent:E,handleEdgesPointerOverEvent:w,handleEdgesPointerOutEvent:h,handleEdgesClickEvent:g,handleEdgesDoubleClickEvent:P,handleEdgesContextMenu:b}}function oe(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function zc(e,t,n,r){const i={moveCounter:0,pointerCounter:0,clickState:void 0},a={pointermove:s,pointerup:c,pointercancel:c};function l(f){i.moveCounter=0,i.pointerCounter===0&&Q(a).forEach(([k,E])=>{document.addEventListener(k,E,{passive:!0})}),i.pointerCounter++}function s(f){i.moveCounter++}function c(f){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,Q(a).forEach(([E,w])=>{document.removeEventListener(E,w)});const k=lt(f.pointerType);if(i.moveCounter<=k){if(f.shiftKey&&t.selectionMode.value!=="container")return;t.selectionMode.value="container";const[E,w,h]=jo(i.clickState,f,"view");i.clickState=E,e.value.dispatchEvent(w),h&&e.value.dispatchEvent(h)}}}function d(f){f.isTrusted||(f.stopPropagation(),r.emit("view:click",{event:f}))}function u(f){f.isTrusted||(f.stopPropagation(),r.emit("view:dblclick",{event:f}))}function v(f){r.emit("view:contextmenu",{event:f}),i.pointerCounter>0&&(i.pointerCounter=0,Q(a).forEach(([k,E])=>{var w;(w=e.value)==null||w.removeEventListener(k,E)}))}const y=f=>{f.preventDefault()};o.onMounted(()=>{const f=e.value;!f||(f.addEventListener("pointerdown",l,{passive:!0}),f.addEventListener("click",d,{passive:!1}),f.addEventListener("dblclick",u,{passive:!1}),f.addEventListener("contextmenu",v,{passive:!1}),n.value&&f.addEventListener("wheel",y,{passive:!1}))}),o.onUnmounted(()=>{const f=e.value;!f||(f.removeEventListener("pointerdown",l),f.removeEventListener("click",d),f.removeEventListener("dblclick",u),f.removeEventListener("contextmenu",v),n.value&&f.removeEventListener("wheel",y))}),o.watch(n,(f,k)=>{const E=e.value;!E||f===k||(f?E.addEventListener("wheel",y,{passive:!1}):E.removeEventListener("wheel",y))})}function Ic(e,t,n,r,i,a){const l={pointers:new Map,pointerPeekCount:0,clicks:new Map};function s(h,g){var P,b;return i.value?{path:(b=(P=e[h])==null?void 0:P.path)!=null?b:h,event:g}:{path:h,event:g}}const c={pointerup:u,pointercancel:v};o.watch(r,h=>{h.size>0&&t.selectionMode.value!=="path"?t.selectionMode.value="path":h.size===0&&t.selectionMode.value==="path"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,h=>{h!=="path"&&r.clear()});function d(h,g){var P;if(!((P=e[h])!=null&&P.clickable)||g.button==2||(g.stopPropagation(),!["default","path"].includes(t.viewMode.value)))return;l.pointers.size==0&&(t.viewMode.value="path",Q(c).forEach(([p,m])=>{document.addEventListener(p,m)}),l.pointerPeekCount=0),l.pointerPeekCount++;const b={pointerId:g.pointerId,id:h,eventTarget:g.currentTarget};l.pointers.set(g.pointerId,b),a.emit("path:pointerdown",s(h,g))}function u(h){var g,P;const b=l.pointers.get(h.pointerId);if(!b)return;h.stopPropagation(),l.pointers.delete(h.pointerId);const p=b.id;a.emit("path:pointerup",s(p,h));const[m,x]=Ht(l.clicks,b.pointerId,p,h);(g=b.eventTarget)==null||g.dispatchEvent(m),x&&((P=b.eventTarget)==null||P.dispatchEvent(x)),l.pointers.size===0&&(l.pointerPeekCount=0,Q(c).forEach(([S,_])=>{document.removeEventListener(S,_)}),Ft(l.clicks),t.viewMode.value="default")}function v(h){if(!!l.pointers.get(h.pointerId)){h.stopPropagation();for(const P of l.pointers.values()){const b=P.id;a.emit("path:pointerup",s(b,h))}l.pointers.clear(),l.pointerPeekCount=0,Q(c).forEach(([P,b])=>{document.removeEventListener(P,b)}),a.emit("view:mode","default")}}function y(h,g){var P;!((P=e[h])!=null&&P.hoverable)||(n.add(h),a.emit("path:pointerover",s(h,g)))}function f(h,g){var P;!((P=e[h])!=null&&P.hoverable)||(n.delete(h),a.emit("path:pointerout",s(h,g)))}function k(h,g){var P,b,p;if(g.isTrusted||!((P=e[h])!=null&&P.clickable)||g.shiftKey&&!["container","path"].includes(t.selectionMode.value))return;t.selectionMode.value="path";const m=(p=(b=e[h])==null?void 0:b.selectable)!=null?p:!1;if(m){const x=Ve.valueOf(l.pointers).filter(S=>r.has(S.id)).length>0;g.shiftKey||x?r.has(h)?r.delete(h):typeof m=="number"&&r.size>=m||r.add(h):r.has(h)||(r.clear(),r.add(h))}a.emit("path:click",s(h,g))}function E(h,g){var P;g.isTrusted||!((P=e[h])!=null&&P.clickable)||a.emit("path:dblclick",s(h,g))}function w(h,g){var P;!((P=e[h])!=null&&P.clickable)||(g.stopPropagation(),a.emit("path:contextmenu",s(h,g)))}return{handlePathPointerDownEvent:d,handlePathPointerOverEvent:y,handlePathPointerOutEvent:f,handlePathClickEvent:k,handlePathDoubleClickEvent:E,handlePathContextMenu:w}}function Ac(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var Lc=Math.ceil,jc=Math.max;function Gt(e,t,n){(n?Gn(e,t,n):t===void 0)?t=1:t=jc(gn(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,a=0,l=Array(Lc(r/t));i<r;)l[a++]=Ac(e,i,i+=t);return l}var Nc=function(){return ne.Date.now()};const Xt=Nc;var Dc="Expected a function",Zc=Math.max,Rc=Math.min;function Vc(e,t,n){var r,i,a,l,s,c,d=0,u=!1,v=!1,y=!0;if(typeof e!="function")throw new TypeError(Dc);t=Ge(t)||0,ie(n)&&(u=!!n.leading,v="maxWait"in n,a=v?Zc(Ge(n.maxWait)||0,t):a,y="trailing"in n?!!n.trailing:y);function f(m){var x=r,S=i;return r=i=void 0,d=m,l=e.apply(S,x),l}function k(m){return d=m,s=setTimeout(h,t),u?f(m):l}function E(m){var x=m-c,S=m-d,_=t-x;return v?Rc(_,a-S):_}function w(m){var x=m-c,S=m-d;return c===void 0||x>=t||x<0||v&&S>=a}function h(){var m=Xt();if(w(m))return g(m);s=setTimeout(h,E(m))}function g(m){return s=void 0,y&&r?f(m):(r=i=void 0,l)}function P(){s!==void 0&&clearTimeout(s),d=0,r=c=i=s=void 0}function b(){return s===void 0?l:g(Xt())}function p(){var m=Xt(),x=w(m);if(r=arguments,i=this,c=m,x){if(s===void 0)return k(c);if(v)return clearTimeout(s),s=setTimeout(h,t),f(c)}return s===void 0&&(s=setTimeout(h,t)),l}return p.cancel=P,p.flush=b,p}function Kt(e,t,n){var r;const i=e.createSVGPoint();i.x=n.x,i.y=n.y;const a=i.matrixTransform((r=t.getCTM())==null?void 0:r.inverse());return{x:a.x,y:a.y}}function qc(e,t,n){const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform(t.getCTM());return{x:i.x,y:i.y}}function Hc(e,t,n,r,i,a){const l=o.computed(()=>!!a.node.selectable&&a.view.boxSelectionEnabled),s=o.computed(()=>t.viewMode.value==="box-selection"),c=o.ref(),d=o.ref(),u={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},v=Vc(()=>{Fc(R(e.value,"container"),R(c.value,"viewport"),d,n.nodes,r,i,u.selectedNodesAtSelectStarted,u.selectionType)},50,{maxWait:100}),y=new Wc(e,k,E,w,f,h);function f(m){if(u.options.stopTrigger!=="click"||u.pointers.size>0)return;const x={x:m.offsetX,y:m.offsetY};u.startPoint&&z.fromObject(u.startPoint).distance(x)>10||p()}function k(m){m.stopPropagation();const x={x:m.offsetX,y:m.offsetY};u.pointers.size===0&&(u.startPoint=x,y.activate(),u.selectedNodesAtSelectStarted.clear(),i.forEach(S=>u.selectedNodesAtSelectStarted.add(S)),u.options.selectionTypeWithShiftKey==="same"?u.selectionType=u.options.selectionType:u.selectionType=m.shiftKey?u.options.selectionTypeWithShiftKey:u.options.selectionType),u.pointers.has(m.pointerId)||u.pointers.add(m.pointerId),u.points.set(m.pointerId,x),g()}function E(m){if(u.pointers.delete(m.pointerId),u.pointers.size===1){const x=R(e.value).getBoundingClientRect(),S={x:m.x-x.x,y:m.y-x.y};u.startPoint=S}else u.pointers.size===0&&(y.deactivate(),u.options.stopTrigger==="pointerup"&&p(),u.selectedNodesAtSelectStarted.clear());g()}function w(m){const x=R(e.value).getBoundingClientRect(),S={x:m.x-x.x,y:m.y-x.y};u.points.set(m.pointerId,S),g(),v()}function h(m){m.key==="Escape"&&u.options.stopTrigger!=="manual"&&(m.stopPropagation(),p())}function g(){let m,x;const S=Array.from(u.pointers);if(S.length>=2){const _=S[0],T=S[S.length-1];m=u.points.get(_),x=u.points.get(T)}else if(u.startPoint&&S.length===1){const _=S[0];m=u.startPoint,x=u.points.get(_)}else m=void 0,x=void 0;m&&x?(d.value={pos:{x:Math.min(m.x,x.x),y:Math.min(m.y,x.y)},size:{width:Math.abs(x.x-m.x),height:Math.abs(x.y-m.y)}},d.value.size.width===0&&(d.value.size.width=1),d.value.size.height===0&&(d.value.size.height=1)):d.value&&(d.value=void 0)}const P=new Uc(e,m=>{!l.value||a.view.selection.detector(m)&&(b({stop:"manual",type:"append",withShiftKey:"invert"}),P.activate())},m=>{!l.value||a.view.selection.detector(m)&&(u.pointers.size===0?p():u.options.stopTrigger="pointerup",P.deactivate())});o.watch(l,m=>{m?P.register():P.unregister()}),o.onMounted(()=>{var m;c.value=(m=e.value)==null?void 0:m.querySelector(".v-viewport"),l.value&&P.register()}),o.onUnmounted(()=>{p(),l.value&&P.unregister()});function b(m={}){var x,S,_;u.options={stopTrigger:(x=m.stop)!=null?x:"pointerup",selectionType:(S=m.type)!=null?S:"append",selectionTypeWithShiftKey:(_=m.withShiftKey)!=null?_:"same"},t.viewMode.value!=="box-selection"&&(t.viewMode.value="box-selection",u.pointers.clear(),y.register())}function p(){t.viewMode.value==="box-selection"&&(t.viewMode.value="default",y.unregister())}return{isBoxSelectionMode:s,selectionBox:d,startBoxSelection:b,stopBoxSelection:p}}function Fc(e,t,n,r,i,a,l,s){if(!n.value)return;const c=n.value,d=Kt(e,t,c.pos),u=Kt(e,t,{x:c.pos.x+c.size.width,y:c.pos.y+c.size.height}),v=new Set(Object.entries(r).filter(([y,f])=>d.x<=f.x&&f.x<=u.x&&d.y<=f.y&&f.y<=u.y).map(([y,f])=>y));if(s==="append")a.forEach(y=>{v.has(y)||a.delete(y)}),v.forEach(y=>{var f,k;const E=(k=(f=i[y])==null?void 0:f.selectable)!=null?k:!1;(E===!0||typeof E=="number"&&a.size<E)&&a.add(y)});else{const y=new Set(l);y.forEach(f=>{v.has(f)&&y.delete(f)}),v.forEach(f=>{var k,E;if(!l.has(f)){const w=(E=(k=i[f])==null?void 0:k.selectable)!=null?E:!1;(w===!0||typeof w=="number"&&y.size<w)&&y.add(f)}}),a.clear(),y.forEach(f=>a.add(f))}}class Wc{constructor(t,n,r,i,a,l){this._container=t,this._handlePointerDownEvent=n,this._handlePointerUpEvent=r,this._handlePointerMoveEvent=i,this._handleClickEvent=a,this._handleKeyDownEvent=l,this._ignoreEvent=s=>s.stopPropagation()}register(){const t={capture:!0,passive:!1},n=R(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,t),n.addEventListener("click",this._handleClickEvent,t),n.addEventListener("pointerenter",this._ignoreEvent,t),n.addEventListener("pointerleave",this._ignoreEvent,t),document.addEventListener("keydown",this._handleKeyDownEvent,t)}activate(){const t={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,t),document.addEventListener("pointerup",this._handlePointerUpEvent,t)}deactivate(){const t={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,t),document.removeEventListener("pointerup",this._handlePointerUpEvent,t)}unregister(){this.deactivate();const t={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,t),n.removeEventListener("click",this._handleClickEvent,t),n.removeEventListener("pointerenter",this._ignoreEvent,t),n.removeEventListener("pointerleave",this._ignoreEvent,t),document.removeEventListener("keydown",this._handleKeyDownEvent,t)}}}class Uc{constructor(t,n,r){this._container=t,this._handleKeyDownEvent=n,this._handleKeyUpEvent=r,this._preventDefault=i=>{i.stopPropagation(),i.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),R(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}var Gc=Object.defineProperty,Zo=Object.getOwnPropertySymbols,Xc=Object.prototype.hasOwnProperty,Kc=Object.prototype.propertyIsEnumerable,Ro=(e,t,n)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ct=(e,t)=>{for(var n in t||(t={}))Xc.call(t,n)&&Ro(e,n,t[n]);if(Zo)for(var n of Zo(t))Kc.call(t,n)&&Ro(e,n,t[n]);return e};const Vo=Symbol("mouseEventHandlers");function Yc(e,t,n,r,i,a,l,s,c,d,u,v,y,f,k,E){const w={selectionMode:o.ref("container"),viewMode:o.ref("default")};l.size>0?w.selectionMode.value="node":s.size>0?w.selectionMode.value="edge":c.size>0&&(w.selectionMode.value="path"),o.watch(w.viewMode,g=>{E.emit("view:mode",g)}),zc(e,w,f,E);const h=ct(ct(ct(ct({selectedNodes:l,hoveredNodes:d,selectedEdges:s,hoveredEdges:u,selectedPaths:c,hoveredPaths:v},$c(r,t,w,d,l,n,E)),Bc(i,w,u,s,E)),Ic(a,w,v,c,y,E)),Hc(e,w,t,r,l,k));return o.provide(Vo,h),h}function ut(){return R(o.inject(Vo),"mouseEventHandlers")}function Qc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const qo=Symbol("emitter");function Jc(){const e=Qc();return o.provide(qo,e),e}function eu(){return R(o.inject(qo),"event emitter")}var dt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ft={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof dt!="undefined")return dt;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var r=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-r.left,e.clientY=e.touches[n].pageY-r.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,r=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var r=this,i,a,l,s=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:r.now(),s=null,l=e.apply(i,a),s||(i=a=null)};return function(){var u=r.now();!c&&n.leading===!1&&(c=u);var v=t-(u-c);return i=this,a=arguments,v<=0||v>t?(clearTimeout(s),s=null,c=u,l=e.apply(i,a),s||(i=a=null)):!s&&n.trailing!==!1&&(s=setTimeout(d,v)),l}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||Ho(33):Ho(t)},calculateDistance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}};function Ho(e){return function(t){window.setTimeout(t,e)}}var tu=ft,nu=function(){var e="",t,n,r,i=[],a={passive:!0},l={passive:!1};tu.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function s(){return r||(r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),r}function c(E,w){var h=function(g){!g&&(g=window.event);var P={originalEvent:g,target:g.target||g.srcElement,type:"wheel",deltaMode:g.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){g.preventDefault?g.preventDefault():g.returnValue=!1}};return s()=="mousewheel"?(P.deltaY=-.025*g.wheelDelta,g.wheelDeltaX&&(P.deltaX=-.025*g.wheelDeltaX)):P.deltaY=g.detail,w(P)};return i.push({element:E,fn:h}),h}function d(E){for(var w=0;w<i.length;w++)if(i[w].element===E)return i[w].fn;return function(){}}function u(E){for(var w=0;w<i.length;w++)if(i[w].element===E)return i.splice(w,1)}function v(E,w,h,g){var P;s()==="wheel"?P=h:P=c(E,h),E[t](e+w,P,g?a:l)}function y(E,w,h,g){var P;s()==="wheel"?P=h:P=d(E),E[n](e+w,P,g?a:l),u(E)}function f(E,w,h){v(E,s(),w,h),s()=="DOMMouseScroll"&&v(E,"MozMousePixelScroll",w,h)}function k(E,w,h){y(E,s(),w,h),s()=="DOMMouseScroll"&&y(E,"MozMousePixelScroll",w,h)}return{on:f,off:k}}(),ht=ft,Fo="unknown";typeof document!="undefined"&&!!document.documentMode&&(Fo="ie");var Yt={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(ht.isElement(t)?n=t:n=e.querySelector(t),!n){var r=Array.prototype.slice.call(e.childNodes||e.children).filter(function(c){return c.nodeName!=="defs"&&c.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var a=e.childNodes||e.children;if(!!a&&a.length>0)for(var l=a.length;l>0;l--)a[a.length-l].nodeName!=="defs"&&n.appendChild(a[a.length-l]);e.appendChild(n)}var s=[];return n.getAttribute("class")&&(s=n.getAttribute("class").split(" ")),~s.indexOf("svg-pan-zoom_viewport")||(s.push("svg-pan-zoom_viewport"),n.setAttribute("class",s.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:ht.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var r=e[n];r.parentNode.insertBefore(r,r)}},dt?dt.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var r=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),Fo==="ie"&&!!n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return ht.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var r=t.createSVGPoint();return ht.touchNormalize(e,t,n),r.x=e.clientX,r.y=e.clientY,r},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var r=e.createSVGPoint();return r.x=t,r.y=n,r}},ee=Yt,ou={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(ee.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(ee.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(r)}var i=document.createElementNS(ee.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(ee.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(ee.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(ee.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomReset:function(e){var t=document.createElementNS(ee.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(ee.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(ee.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r);var i=document.createElementNS(ee.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(ee.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(ee.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(ee.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},ru=Yt,he=ft,G=function(e,t){this.init(e,t)};G.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=he.proxy(this.updateCTM,this),this.requestAnimationFrame=he.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},G.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(n)?n:1,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},G.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},G.prototype.getViewBox=function(){return he.extend({},this.viewBox)},G.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t=isFinite(t)?t:1,e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},G.prototype.getOriginalState=function(){return he.extend({},this.originalState)},G.prototype.getState=function(){return he.extend({},this.activeState)},G.prototype.getZoom=function(){return this.activeState.zoom},G.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},G.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},G.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},G.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},G.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,a=!1;r===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=a=!0):he.isObject(r)&&(r.x===!1?(e.e=this.getPan().x,i=!0):he.isNumber(r.x)&&(e.e=r.x),r.y===!1?(e.f=this.getPan().y,a=!0):he.isNumber(r.y)&&(e.f=r.y)),i&&a||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},G.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},G.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},G.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},G.prototype.pendingUpdate=!1,G.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},G.prototype.updateCTM=function(){var e=this.getCTM();ru.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var iu=function(e,t){return new G(e,t)},Wo=nu,Qt=ou,J=ft,X=Yt,au=iu,N=function(e,t){this.init(e,t)},su={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},Uo={passive:!0},Go={passive:!1};N.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),X.setupSvgAttributes(this.svg),this.options=J.extend(J.extend({},su),t),this.state="none";var r=X.getBoundingClientRectNormalized(e);this.width=r.width,this.height=r.height,this.viewport=au(X.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(a,l){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(a,l)},onZoom:function(a){if(n.viewport&&n.options.onZoom)return n.options.onZoom(a)},beforePan:function(a,l){if(n.viewport&&n.options.beforePan)return n.options.beforePan(a,l)},onPan:function(a){if(n.viewport&&n.options.onPan)return n.options.onPan(a)},onUpdatedCTM:function(a){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(a)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&Qt.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},N.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(a){if(a.pointerType!=="touch"){var l=e.handleMouseDown(a,t);return t=a,l}},touchstart:function(a){var l=e.handleTouchStart(a,t);return t=a,l},pointerup:function(a){if(a.pointerType!=="touch")return e.handleMouseUp(a)},touchend:function(a){return e.handleTouchEnd(a)},pointermove:function(a){if(a.pointerType!=="touch")return e.handleMouseMove(a)},touchmove:function(a){return e.handleTouchMove(a)},pointerleave:function(a){if(a.pointerType!=="touch")return e.handleMouseUp(a)},pointercancel:function(a){if(a.pointerType!=="touch")return e.handleMouseUp(a)},touchleave:function(a){return e.handleTouchEnd(a)},touchcancel:function(a){return e.handleTouchEnd(a)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?Go:Uo);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},N.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Wo.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},N.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Wo.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},N.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/r;var i=this.svg.getScreenCTM().inverse(),a=X.getEventPoint(e,this.svg).matrixTransform(i),l=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(l,a)}},N.prototype.zoomAtPoint=function(e,t,n){var r=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*r.zoom?e=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*r.zoom&&(e=this.options.maxZoom*r.zoom/this.getZoom());var i=this.viewport.getCTM(),a=t.matrixTransform(i.inverse()),l=this.svg.createSVGMatrix().translate(a.x,a.y).scale(e).translate(-a.x,-a.y),s=i.multiply(l);s.a!==i.a&&this.viewport.setCTM(s)},N.prototype.zoom=function(e,t){this.zoomAtPoint(e,X.getSvgCenterPoint(this.svg,this.width,this.height),t)},N.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},N.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),J.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=X.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)},N.prototype.getZoom=function(){return this.viewport.getZoom()},N.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},N.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},N.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},N.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},N.prototype.reset=function(){this.resetZoom(),this.resetPan()},N.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=X.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)},N.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),J.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&J.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=X.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},N.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=X.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},N.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")},N.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=X.getTouchPoint(e,this.svg,0),r=X.getTouchPoint(e,this.svg,1);this.firstDistance=J.calculateDistance(n,r),n.x=(n.x+r.x)/2,n.y=(n.y+r.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},N.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=X.getTouchPoint(e,this.svg,0),n=X.getTouchPoint(e,this.svg,1),r=this.svg.createSVGPoint();if(r.x=(t.x+n.x)/2,r.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var i=r.matrixTransform(this.firstEventCTM.inverse()),a=this.firstEventCTM.translate(i.x-this.stateOrigin.x,i.y-this.stateOrigin.y);this.viewport.setCTM(a)}if(this.options.zoomEnabled){var l=J.calculateDistance(t,n),s=l/this.firstDistance,c=this.svg.getScreenCTM().inverse(),d=r.matrixTransform(c);this.zoomAtPoint(this.firstZoomLevel*s,d,!0)}}},N.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=X.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=X.getTouchPoint(e,this.svg,0),n=X.getTouchPoint(e,this.svg,1);this.firstDistance=J.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},N.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},N.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},N.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})},N.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},N.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},N.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},N.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},N.prototype.resize=function(){var e=X.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},N.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?Go:Uo);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),pe=pe.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},N.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:J.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:J.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,Qt.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,Qt.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:J.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:J.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:J.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var pe=[],lu=function(e,t){var n=J.getSvg(e);if(n===null)return null;for(var r=pe.length-1;r>=0;r--)if(pe[r].svg===n)return pe[r].instance.getPublicInstance();return pe.push({svg:n,instance:new N(n,t)}),pe[pe.length-1].instance.getPublicInstance()},cu=lu;const uu={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const r={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:r.height-t.y,left:-t.x,right:r.width-t.x},center:{x:r.width/2-t.x,y:r.height/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:r,height:i}=this.getSizes(),a=t/n,l=r/i,s=a<l?n*l:t,c=a>l?t/l:n,d=Math.min(r/s,i/c),u=this.getRealZoom(),v=this.getZoom(),y=u/v;this.zoom(d/y);const f={x:(e.left+t/2)*d,y:(e.top+n/2)*d};this.pan({x:-f.x+s/2*d,y:-f.y+c/2*d})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const r=Math.max(1e-4,t),i=Math.max(r,n),a=Math.max(Math.min(i,e),r),l=this.getRealZoom(),s=this.getZoom(),c=l/s;this.setMinZoom(r/c).setMaxZoom(i/c).zoom(a/c)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function du(e,t){var n,r;const i=e;return i._isPanEnabled=(n=t.panEnabled)!=null?n:!0,i._isZoomEnabled=(r=t==null?void 0:t.zoomEnabled)!=null?r:!0,i._internalIsPanEnabled=i.isPanEnabled,i._internalEnablePan=i.enablePan,i._internalDisablePan=i.disablePan,i._internalIsZoomEnabled=i.isZoomEnabled,i._internalEnableZoom=i.enableZoom,i._internalDisableZoom=i.disableZoom,Object.assign(e,uu),i}function fu(e,t){var n,r,i,a,l,s;const c=(r=(n=t.customEventsHandler)==null?void 0:n.init)!=null?r:v=>{},d=(a=(i=t.customEventsHandler)==null?void 0:i.destroy)!=null?a:v=>{},u=(s=(l=t.customEventsHandler)==null?void 0:l.haltEventListeners)!=null?s:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:v=>{du(v.instance,t),c(v)},destroy:v=>d(v),haltEventListeners:u},cu(e,t)}function hu(e,t){const n=o.ref();let r=0;const i=[],a=[],l=()=>{r=1,i.forEach(u=>u()),i.length=0},s=()=>{r=2,a.forEach(u=>u()),a.length=0};return o.onMounted(()=>{var u,v,y,f,k,E;const w=R(e.value,"<svg>"),h=(v=(u=t.customEventsHandler)==null?void 0:u.init)!=null?v:p=>{},g=(f=(y=t.customEventsHandler)==null?void 0:y.destroy)!=null?f:p=>{},P=(E=(k=t.customEventsHandler)==null?void 0:k.haltEventListeners)!=null?E:[];t.customEventsHandler={init:p=>{n.value=p.instance,h(p),l()},destroy:p=>{s(),g(p)},haltEventListeners:P};const b=()=>{const p=w.getBoundingClientRect();p.width!==0&&p.height!==0?fu(w,t):setTimeout(b,200)};b()}),o.onUnmounted(()=>{var u;(u=n.value)==null||u.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:u=>{r===0?i.push(u):r===1&&u()},onSvgPanZoomUnmounted:u=>{r===0||r===1?a.push(u):u()}}}const Xo=Symbol("zoomLevel");function pu(e,t){const n=o.computed(()=>t.scalingObjects?1:1/e.value);return o.provide(Xo,{zoomLevel:e,scale:n}),{scale:n}}function re(){return R(o.inject(Xo),"zoomLevel")}var gu=(e,t,n)=>new Promise((r,i)=>{var a=c=>{try{s(n.next(c))}catch(d){i(d)}},l=c=>{try{s(n.throw(c))}catch(d){i(d)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,l);s((n=n.apply(e,t)).next())});function mu(e){return e instanceof Promise||e&&typeof e.then=="function"}function vu(){let e=null;const t=o.ref({enabled:!1,duration:300,timingFunction:"linear"});function n(r,i=300,a="linear"){e&&(clearTimeout(e),e=null),t.value={enabled:!0,duration:i,timingFunction:a},o.nextTick(()=>gu(this,null,function*(){const l=r();mu(l)&&(yield l),e&&clearTimeout(e),e=window==null?void 0:window.setTimeout(()=>{t.value.enabled=!1,e=null},i)}))}return{transitionWhile:n,transitionOption:t}}function yu(e){const t=o.ref({}),n=o.ref(!1);let r=1;const i=new Map;return o.watchEffect(()=>{if(e.value instanceof Array){const a=new Set([]);if(t.value=Object.fromEntries(e.value.map(l=>{let s=l.id;return s||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),s=i.get(l),s||(s="path-"+r++,i.set(l,s))),a.add(s),[s,l]})),n.value)for(const[l,s]of Array.from(i.entries()))a.has(s)||i.delete(l)}else t.value=e.value}),{objects:t,isInCompatibilityModeForPath:n}}function bu(e,t,n,r){if(r){const a=o.ref(r(e[t])),l=s=>{Se(s,a.value)||(a.value=s),Se(s,e[t])||n(`update:${t}`,s)};return o.watch(()=>r(a.value),l),o.watch(()=>e[t],s=>l(r(s))),a.value!==e[t]&&n(`update:${t}`,a.value),a}const i=o.ref(e[t]);return o.watch(()=>e[t],a=>{Se(a,i.value)||(i.value=a)}),o.watch(i,a=>{Se(a,e[t])||n(`update:${t}`,a)}),i}function Jt(e,t,n,r){const i=o.reactive(new Set);return o.watch(()=>e[t],()=>{const l=e[t].filter(s=>s in n.value);Se(l,Array.from(i))||(i.clear(),l.forEach(i.add,i))},{deep:!0,immediate:!0}),o.watch(i,()=>{const a=Array.from(i);Se(e[t],a)||r(`update:${t}`,a)}),ve(i)}const wu=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],Eu=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],qe=o.defineComponent({props:{baseX:{type:Number,default:0},baseY:{type:Number,default:0},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:r}=re(),i=o.ref(n.baseX),a=o.ref(n.baseY),l=o.ref(0),s=o.ref("#000000"),c=o.ref(void 0),d=o.ref(0),u=o.ref(0),v=o.ref(0),y=o.ref(0);return o.watchEffect(()=>{var f;const k=r.value;l.value=n.config.strokeWidth*k,s.value=(f=n.config.strokeColor)!=null?f:"none",c.value=ze(n.config.strokeDasharray,k),n.config.type==="circle"?(i.value=n.baseX,a.value=n.baseY,d.value=n.config.radius*k):(u.value=n.config.width*k,v.value=n.config.height*k,y.value=n.config.borderRadius*k,i.value=n.baseX-u.value/2,a.value=n.baseY-v.value/2)}),t({x:i,y:a,strokeWidth:l,strokeColor:s,strokeDasharray:c,radius:d,width:u,height:v,borderRadius:y}),(f,k)=>e.config.type==="circle"?(o.openBlock(),o.createElementBlock("circle",{key:0,class:"v-shape-circle",cx:i.value,cy:a.value,r:d.value,fill:e.config.color,stroke:s.value,"stroke-width":l.value,"stroke-dasharray":c.value},null,8,wu)):(o.openBlock(),o.createElementBlock("rect",{key:1,class:"v-shape-rect",x:i.value,y:a.value,width:u.value,height:v.value,rx:y.value,ry:y.value,fill:e.config.color,stroke:s.value,"stroke-width":l.value,"stroke-dasharray":c.value},null,8,Eu))}}),ku=["rx","ry","fill","transform"],Pu=["x","y","dominant-baseline","font-family","font-size","fill"],xu=["x","dy","dominant-baseline"],He=o.defineComponent({props:{text:{type:String,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},dominantBaseline:{type:String,required:!1,default:"central"},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e;function r(h,g,P){var b;const p=h.getBBox();g.x=p.x,g.y=p.y,g.width=p.width,g.height=p.height,P.value=(b=h.getAttribute("transform"))!=null?b:void 0}function i(h,g,P){const b=new MutationObserver(()=>{r(h,g,P)});return b.observe(h,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),r(h,g,P),b}const a=o.useAttrs(),{scale:l}=re(),s=o.computed(()=>{var h,g;return(g=(h=n.text)==null?void 0:h.toString().split(/\r?\n/))!=null?g:""}),c=o.computed(()=>{var h;return(h=a["font-size"])!=null?h:n.config.fontSize*l.value}),d=o.computed(()=>c.value*n.config.lineHeight),u=o.computed(()=>{const h=n.dominantBaseline;return h==="hanging"?0:h==="central"?-(d.value*(s.value.length-1))/2:-d.value*(s.value.length-1)}),v=o.ref(),y=o.ref(""),f=o.reactive({x:0,y:0,width:0,height:0}),k=o.computed(()=>{var h,g;const P=n.config.background;if(!P)return f;let b,p;P.padding instanceof Object?(b=P.padding.vertical,p=P.padding.horizontal):(b=(h=P.padding)!=null?h:0,p=(g=P.padding)!=null?g:0);const m=d.value-c.value;return{x:f.x-p*l.value,y:f.y-b*l.value-m/2,width:f.width+p*2*l.value,height:f.height+b*2*l.value+m}});let E;const w=()=>{n.config.background&&n.config.background.visible?!E&&v.value&&(E=i(v.value,f,y)):(E==null||E.disconnect(),E=void 0)};return o.onMounted(()=>w()),o.watch(()=>n.config.background&&n.config.background.visible,(h,g)=>{h!=g&&w()}),o.onUnmounted(()=>{E==null||E.disconnect(),E=void 0}),t({fontSize:c,element:v,transform:y,backgroundRectPos:k,scale:l}),(h,g)=>{var P,b,p,m,x,S;return o.openBlock(),o.createElementBlock(o.Fragment,null,[e.config.background&&e.config.background.visible?(o.openBlock(),o.createElementBlock("rect",o.mergeProps({key:0,class:"v-text-background"},o.unref(k),{rx:((b=(P=e.config.background)==null?void 0:P.borderRadius)!=null?b:0)*o.unref(l),ry:((m=(p=e.config.background)==null?void 0:p.borderRadius)!=null?m:0)*o.unref(l),fill:(S=(x=e.config.background)==null?void 0:x.color)!=null?S:"#ffffff",transform:y.value}),null,16,ku)):o.createCommentVNode("",!0),o.createElementVNode("text",o.mergeProps({ref_key:"element",ref:v,class:"v-text"},h.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":h.$attrs["font-family"]?`${h.$attrs["font-family"]}`:e.config.fontFamily,"font-size":o.unref(c),fill:h.$attrs.fill?`${h.$attrs.fill}`:e.config.color}),[o.unref(s).length<=1?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createTextVNode(o.toDisplayString(e.text),1)],64)):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(s),(_,T)=>(o.openBlock(),o.createElementBlock("tspan",{key:T,x:e.x,dy:T==0?o.unref(u):o.unref(d),"dominant-baseline":e.dominantBaseline},o.toDisplayString(_),9,xu))),128))],16,Pu)],64)}}});var Ko=Math.pow;const Su=["transform"],_u=o.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,r=o.computed(()=>{var x;return((x=n.pos)==null?void 0:x.x)||0}),i=o.computed(()=>{var x;return((x=n.pos)==null?void 0:x.y)||0}),a=Qn(),{scale:l}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:c,handleNodePointerOutEvent:d,handleNodeClickEvent:u,handleNodeDoubleClickEvent:v,handleNodeContextMenu:y}=ut(),f=o.computed(()=>{var x;return n.state.label.visible&&(x=n.state.labelText)!=null?x:!1}),k=o.computed(()=>n.state.label.direction===$.CENTER?0:n.state.label.margin*l.value),E=o.ref(0),w=o.ref(0),h=o.ref(0),g=o.ref(0);o.watchEffect(()=>{const x=l.value,S=n.state.shape;if(S.type=="circle"){const _=S.radius*x,T=_+k.value,C=Math.sqrt(Ko(T,2)/2);E.value=_+k.value,w.value=_+k.value,h.value=C,g.value=C}else{const _=S.borderRadius*x,T=S.width*x,C=S.height*x,B=_+k.value,L=Math.sqrt(Ko(B,2)/2);E.value=C/2+k.value,w.value=T/2+k.value,h.value=C/2-_+L,g.value=T/2-_+L}});const P=o.computed(()=>{switch(n.state.label.direction){case $.CENTER:case $.NORTH:case $.SOUTH:return"middle";case $.EAST:case $.NORTH_EAST:case $.SOUTH_EAST:return"start";case $.WEST:case $.NORTH_WEST:case $.SOUTH_WEST:default:return"end"}}),b=o.computed(()=>{switch(n.state.label.direction){case $.NORTH:case $.NORTH_EAST:case $.NORTH_WEST:return"text-top";case $.SOUTH:case $.SOUTH_EAST:case $.SOUTH_WEST:return"hanging";case $.CENTER:case $.EAST:case $.WEST:default:return"central"}}),p=o.computed(()=>{switch(n.state.label.direction){case $.CENTER:case $.NORTH:case $.SOUTH:return 0;case $.EAST:return w.value;case $.WEST:return-w.value;case $.NORTH_EAST:case $.SOUTH_EAST:return g.value;case $.NORTH_WEST:case $.SOUTH_WEST:default:return-g.value}}),m=o.computed(()=>{switch(n.state.label.direction){case $.NORTH:return-E.value;case $.SOUTH:return E.value;case $.CENTER:case $.EAST:case $.WEST:return 0;case $.NORTH_EAST:case $.NORTH_WEST:return-h.value;case $.SOUTH_EAST:case $.SOUTH_WEST:default:return h.value}});return t({x:r,y:i,config:a,labelVisibility:f,handleNodePointerDownEvent:s,handleNodePointerOverEvent:c,handleNodePointerOutEvent:d,handleNodeClickEvent:u,handleNodeDoubleClickEvent:v,handleNodeContextMenu:y,textAnchor:P,dominantBaseline:b,labelX:p,labelY:m,scale:l}),(x,S)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${o.unref(r)} ${o.unref(i)})`,onPointerdown:S[0]||(S[0]=o.withModifiers(_=>o.unref(s)(e.id,_),["stop"])),onPointerenterPassive:S[1]||(S[1]=_=>o.unref(c)(e.id,_)),onPointerleavePassive:S[2]||(S[2]=_=>o.unref(d)(e.id,_)),onClick:S[3]||(S[3]=o.withModifiers(_=>o.unref(u)(e.id,_),["stop"])),onDblclick:S[4]||(S[4]=o.withModifiers(_=>o.unref(v)(e.id,_),["stop"])),onContextmenu:S[5]||(S[5]=_=>o.unref(y)(e.id,_))},[o.renderSlot(x.$slots,"override-node",{nodeId:e.id,scale:o.unref(l),config:e.state.shape,class:o.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},()=>[o.createVNode(qe,{config:e.state.shape,class:o.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])],!0),o.unref(f)?o.renderSlot(x.$slots,"override-node-label",{key:0,nodeId:e.id,scale:o.unref(l),text:e.state.labelText,x:o.unref(p),y:o.unref(m),config:e.state.label,shape:e.state.shape,textAnchor:o.unref(P),dominantBaseline:o.unref(b)},()=>[o.createVNode(He,{text:e.state.labelText,x:o.unref(p),y:o.unref(m),config:e.state.label,"text-anchor":o.unref(P),"dominant-baseline":o.unref(b)},null,8,["text","x","y","config","text-anchor","dominant-baseline"])],!0):o.createCommentVNode("",!0)],42,Su))}}),pf="",te=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Ou=te(_u,[["__scopeId","data-v-04860034"]]),Mu=o.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,r=o.computed(()=>{var s;return((s=n.pos)==null?void 0:s.x)||0}),i=o.computed(()=>{var s;return((s=n.pos)==null?void 0:s.y)||0}),a=Qn(),l=o.reactive({});return o.watchEffect(()=>{var s,c,d;const u=n.state.shape;if(u.type==="circle"){const v={type:"circle",radius:u.radius+((s=u.strokeWidth)!=null?s:0)/2+a.focusring.padding+a.focusring.width/2,color:"none",strokeWidth:a.focusring.width,strokeColor:a.focusring.color,strokeDasharray:a.focusring.dasharray};Object.assign(l,v)}else{const v={type:"rect",width:u.width+((c=u.strokeWidth)!=null?c:0)+a.focusring.padding*2+a.focusring.width,height:u.height+((d=u.strokeWidth)!=null?d:0)+a.focusring.padding*2+a.focusring.width,borderRadius:u.borderRadius>0?u.borderRadius+a.focusring.padding:0,color:"none",strokeWidth:a.focusring.width,strokeColor:a.focusring.color,strokeDasharray:a.focusring.dasharray};Object.assign(l,v)}}),t({x:r,y:i,shapeConfig:l}),(s,c)=>(o.openBlock(),o.createBlock(qe,{class:"v-node-focus-ring","base-x":o.unref(r),"base-y":o.unref(i),config:o.unref(l)},null,8,["base-x","base-y","config"]))}}),gf="",Cu=te(Mu,[["__scopeId","data-v-fd3ea0b1"]]),Tu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],$u=o.defineComponent({props:{p1:{type:Object,required:!0},p2:{type:Object,required:!0},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:r}=re(),i=o.computed(()=>n.config.width*r.value),a=o.computed(()=>ze(n.config.dasharray,r.value)),l=o.computed(()=>{const s=n.config.animate?Ue(n.config.dasharray)*n.config.animationSpeed*r.value:!1;return s?`--animation-speed:${s}`:void 0});return t({strokeWidth:i,strokeDasharray:a,animationSpeed:l}),(s,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-line":!0,animate:e.config.animate}),d:`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`,stroke:e.config.color,"stroke-width":o.unref(i),"stroke-dasharray":o.unref(a),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(l))},null,14,Tu))}}),mf="",Yo=te($u,[["__scopeId","data-v-ce56a701"]]),Bu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],zu=o.defineComponent({props:{p1:{type:Object,required:!0},p2:{type:Object,required:!0},radius:{type:Array,required:!0},isLargeArc:{type:Boolean,required:!0},isClockwise:{type:Boolean,required:!0},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:r}=re(),i=o.computed(()=>n.config.width*r.value),a=o.computed(()=>ze(n.config.dasharray,r.value)),l=o.computed(()=>{const c=n.config.animate?Ue(n.config.dasharray)*n.config.animationSpeed*r.value:!1;return c?`--animation-speed:${c}`:void 0}),s=o.computed(()=>{const{p1:c,p2:d,radius:u,isLargeArc:v,isClockwise:y}=n,[f,k]=u,E=v?1:0,w=y?1:0;return`M ${c.x} ${c.y} A ${f} ${k} 0 ${E} ${w} ${d.x} ${d.y}`});return t({strokeWidth:i,strokeDasharray:a,animationSpeed:l}),(c,d)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-line":!0,animate:e.config.animate}),d:o.unref(s),stroke:e.config.color,"stroke-width":o.unref(i),"stroke-dasharray":o.unref(a),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(l)),fill:"none"},null,14,Bu))}}),vf="",Iu=te(zu,[["__scopeId","data-v-4c37d668"]]),Au=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],Lu=o.defineComponent({props:{state:{type:Object,required:!0},config:{type:Object,required:!0},markerStart:{type:String,required:!1,default:void 0},markerEnd:{type:String,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,{scale:r}=re(),i=o.computed(()=>{var c,d;const u=n.state.position,v=[...(d=(c=n.state.curve)==null?void 0:c.control)!=null?d:[],{x:u.p2.x,y:u.p2.y}],y=[];return y.push(`M ${u.p1.x} ${u.p1.y}`),Gt(v,2).forEach(([f,k])=>y.push(`Q ${f.x} ${f.y} ${k.x} ${k.y}`)),y.join(" ")}),a=o.computed(()=>n.config.width*r.value),l=o.computed(()=>ze(n.config.dasharray,r.value)),s=o.computed(()=>{const c=n.config.animate?Ue(n.config.dasharray)*n.config.animationSpeed*r.value:!1;return c?`--animation-speed:${c}`:void 0});return t({strokeWidth:a,strokeDasharray:l,animationSpeed:s}),(c,d)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-line":!0,animate:e.config.animate}),d:o.unref(i),fill:"none",stroke:e.config.color,"stroke-width":o.unref(a),"stroke-dasharray":o.unref(l),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,Au))}}),yf="",ju=te(Lu,[["__scopeId","data-v-07a0a855"]]),Nu=o.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=De();return t({config:n}),(r,i)=>e.state.loop?(o.openBlock(),o.createBlock(Iu,o.mergeProps({key:0},e.state.position,{radius:e.state.loop.radius,"is-large-arc":e.state.loop.isLargeArc,"is-clockwise":e.state.loop.isClockwise,class:{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):o.unref(n).type=="straight"||!e.state.curve?(o.openBlock(),o.createBlock(Yo,o.mergeProps({key:1,"data-edge-id":e.id},e.state.position,{class:{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(o.openBlock(),o.createBlock(ju,{key:2,"data-edge-id":e.id,class:o.normalizeClass({selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected}),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),bf="",Du=te(Nu,[["__scopeId","data-v-5bc28572"]]),Zu=o.defineComponent({props:{edges:{type:Object,required:!0},layouts:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,r=De(),{handleEdgesPointerDownEvent:i,handleEdgesPointerOverEvent:a,handleEdgesPointerOutEvent:l,handleEdgesClickEvent:s,handleEdgesDoubleClickEvent:c,handleEdgesContextMenu:d}=ut(),{edgeStates:u}=$e(),v=o.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),y=o.ref({x:0,y:0});o.watchEffect(()=>{const b=Object.keys(n.edges).find(p=>p in u);b&&(v.value=u[b].position,y.value={x:(v.value.p1.x+v.value.p2.x)/2,y:(v.value.p1.y+v.value.p2.y)/2})});const f=o.computed(()=>Object.keys(n.edges)),k=o.computed(()=>O.values(r.summarized.label,n.edges)),E=o.computed(()=>O.values(r.summarized.shape,n.edges)),w=o.computed(()=>O.values(r.summarized.stroke,n.edges)),h=o.computed(()=>f.value.some(b=>u[b].hovered)),g=o.computed(()=>f.value.some(b=>u[b].selectable)),P=o.computed(()=>f.value.some(b=>u[b].selected));return t({config:r,pos:v,centerPos:y,handleEdgesPointerDownEvent:i,handleEdgesPointerOverEvent:a,handleEdgesPointerOutEvent:l,handleEdgesClickEvent:s,handleEdgesDoubleClickEvent:c,handleEdgesContextMenu:d,hovered:h,selectable:g,selected:P}),(b,p)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-line-summarized":!0,hovered:o.unref(h),selectable:o.unref(g),selected:o.unref(P)}),onPointerdown:p[0]||(p[0]=o.withModifiers(m=>o.unref(i)(o.unref(f),m),["stop"])),onPointerenterPassive:p[1]||(p[1]=m=>o.unref(a)(o.unref(f),m)),onPointerleavePassive:p[2]||(p[2]=m=>o.unref(l)(o.unref(f),m)),onClick:p[3]||(p[3]=o.withModifiers(m=>o.unref(s)(o.unref(f),m),["stop"])),onDblclick:p[4]||(p[4]=o.withModifiers(m=>o.unref(c)(o.unref(f),m),["stop"])),onContextmenu:p[5]||(p[5]=m=>o.unref(d)(o.unref(f),m))},[o.createVNode(Yo,o.mergeProps(v.value,{config:o.unref(w),"data-edge-id":o.unref(f)[0]}),null,16,["config","data-edge-id"]),o.createVNode(qe,{"base-x":y.value.x,"base-y":y.value.y,config:o.unref(E)},null,8,["base-x","base-y","config"]),o.createVNode(He,{text:Object.keys(e.edges).length.toString(),x:y.value.x,y:y.value.y,config:o.unref(k),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),wf="",Ru=te(Zu,[["__scopeId","data-v-3b995162"]]),Vu={class:"v-edge-overlay"},Qo=o.defineComponent({props:{edgeId:{type:String,required:!1,default:void 0},edge:{type:Object,required:!1,default:void 0},edges:{type:Object,required:!1,default:()=>{}},state:{type:Object,required:!0},isSummarized:{type:Boolean,required:!0}},setup(e){const t=e,{svg:n}=mt(),{scale:r}=re(),i=De();function a(){return t.isSummarized?O.values(i.summarized.stroke,t.edges):t.state.line.stroke}function l(u){return{source:u.p1,target:u.p2}}function s(u){if(u.curve)return u.curve.center;{const v=u.origin.p1,y=u.origin.p2;return{x:(v.x+y.x)/2,y:(v.y+y.y)/2}}}function c(){var u;if(!n.value)return 0;const v=(u=t.edgeId)!=null?u:Object.keys(t.edges)[0],y=n.value.querySelector(`path[data-edge-id="${v}"]`);return y?y.getTotalLength():0}function d(u){var v;if(!n.value||!isFinite(u))return t.state.position.p1;t.state;const y=(v=t.edgeId)!=null?v:Object.keys(t.edges)[0],f=n.value.querySelector(`path[data-edge-id="${y}"]`);if(!f)return t.state.position.p1;const k=f.getPointAtLength(u);return{x:k.x,y:k.y}}return(u,v)=>(o.openBlock(),o.createElementBlock("g",Vu,[e.isSummarized?o.renderSlot(u.$slots,"default",{key:0,edges:e.edges,isSummarized:e.isSummarized,stroke:a(),position:l(e.state.origin),center:s(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:c(),pointAtLength:d}):o.renderSlot(u.$slots,"default",{key:1,edgeId:e.edgeId,edge:e.edge,edges:{[e.edgeId]:e.edge},isSummarized:e.isSummarized,stroke:a(),position:l(e.state.origin),center:s(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:c(),pointAtLength:d})]))}}),qu=o.defineComponent({props:{hasEdgeOverlaySlot:{type:Boolean,required:!0}},setup(e,{expose:t}){const{edgeStates:n,edgeZOrderedList:r,edgeGroupStates:i,layouts:a}=$e();return t({edgeStates:n,edgeZOrderedList:r,edgeGroupStates:i,layouts:a}),(l,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[o.unref(vc)(c)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[(o.openBlock(),o.createBlock(Ru,{key:c.key,edges:c.group.edges,layouts:o.unref(a).nodes},null,8,["edges","layouts"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(Qo,{key:c.key,edges:c.group.edges,state:o.unref(n)[Object.keys(c.group.edges)[0]],"is-summarized":!0},{default:o.withCtx(d=>[o.renderSlot(l.$slots,"default",o.normalizeProps(o.guardReactiveProps(d)))]),_:2},1032,["edges","state"])):o.createCommentVNode("",!0)],64)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[(o.openBlock(),o.createBlock(Du,{key:c.key,id:c.key,state:o.unref(n)[c.key],"source-pos":o.unref(a).nodes[c.edge.source],"target-pos":o.unref(a).nodes[c.edge.target]},null,8,["id","state","source-pos","target-pos"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(Qo,{key:c.key,"edge-id":c.key,edge:c.edge,state:o.unref(n)[c.key],"is-summarized":!1},{default:o.withCtx(d=>[o.renderSlot(l.$slots,"default",o.normalizeProps(o.guardReactiveProps(d)))]),_:2},1032,["edge-id","edge","state"])):o.createCommentVNode("",!0)],64))],64))),256))}}),Hu=["d","stroke-width"],Fu=o.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,{scale:r}=re(),i=De(),{handleEdgePointerDownEvent:a,handleEdgePointerOverEvent:l,handleEdgePointerOutEvent:s,handleEdgeClickEvent:c,handleEdgeDoubleClickEvent:d,handleEdgeContextMenu:u}=ut(),v=o.computed(()=>{const f=n.state.position;if(n.state.loop){const{radius:k,isLargeArc:E,isClockwise:w}=n.state.loop,[h,g]=k,P=E?1:0,b=w?1:0;return`M ${f.p1.x} ${f.p1.y} A ${h} ${g} 0 ${P} ${b} ${f.p2.x} ${f.p2.y}`}else{if(i.type==="straight"||!n.state.curve)return`M ${f.p1.x} ${f.p1.y} L ${f.p2.x} ${f.p2.y}`;{const k=[...n.state.curve.control,{x:f.p2.x,y:f.p2.y}],E=[];return E.push(`M ${f.p1.x} ${f.p1.y}`),Gt(k,2).forEach(([w,h])=>E.push(`Q ${w.x} ${w.y} ${h.x} ${h.y}`)),E.join(" ")}}}),y=o.computed(()=>(n.state.line.stroke.width+10)*r.value);return t({config:i,handleEdgePointerDownEvent:a,handleEdgePointerOverEvent:l,handleEdgePointerOutEvent:s,handleEdgeClickEvent:c,handleEdgeDoubleClickEvent:d,handleEdgeContextMenu:u}),(f,k)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-line-background":!0,selectable:e.state.selectable}),d:o.unref(v),stroke:"transparent","stroke-width":o.unref(y),fill:"none",onPointerdown:k[0]||(k[0]=o.withModifiers(E=>o.unref(a)(e.id,E),["stop"])),onPointerenterPassive:k[1]||(k[1]=E=>o.unref(l)(e.id,E)),onPointerleavePassive:k[2]||(k[2]=E=>o.unref(s)(e.id,E)),onClick:k[3]||(k[3]=o.withModifiers(E=>o.unref(c)(e.id,E),["stop"])),onDblclick:k[4]||(k[4]=o.withModifiers(E=>o.unref(d)(e.id,E),["stop"])),onContextmenu:k[5]||(k[5]=E=>o.unref(u)(e.id,E))},null,42,Hu))}}),Ef="",Wu=te(Fu,[["__scopeId","data-v-db4af818"]]),Uu=o.defineComponent({setup(e,{expose:t}){const{edgeStates:n,edgeGroupStates:r,layouts:i}=$e();return t({edgeStates:n,edgeGroupStates:r,layouts:i}),(a,l)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r).edgeGroups,({summarize:s,edges:c})=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[s?o.createCommentVNode("",!0):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(c,(d,u)=>(o.openBlock(),o.createBlock(Wu,{key:u,id:u,state:o.unref(n)[u],"source-pos":o.unref(i).nodes[d.source],"target-pos":o.unref(i).nodes[d.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Gu={class:"v-edge-labels"},Xu=o.defineComponent({setup(e,{expose:t}){const n=De(),{nodeStates:r,edgeStates:i,edgeGroupStates:a,summarizedEdgeStates:l,layouts:s}=$e(),{scale:c}=re(),d=o.computed(()=>Object.fromEntries(Object.entries(a.edgeGroups).filter(([E,w])=>!w.summarize&&Object.keys(w.edges).length>0))),u=o.computed(()=>{const E={},w={};return Object.entries(a.edgeGroups).forEach(([h,g])=>{Object.keys(g.edges).length>0&&(g.summarize?w[h]=g:E[h]=g)}),{individual:E,summarized:w}}),v=o.computed(()=>E=>{var w;return{pos:(w=s.nodes[E])!=null?w:{x:0,y:0},shape:r[E].shape}}),y=o.computed(()=>(E,w)=>To(i[E].labelPosition,w,n.label.margin,n.label.padding,c.value)),f=o.computed(()=>(E,w)=>{var h,g;const P=Object.keys(w.edges)[0];return To(i[P].labelPosition,(g=(h=l[E])==null?void 0:h.stroke)!=null?g:i[P].line.stroke,n.label.margin,n.label.padding,c.value)}),k=o.computed(()=>E=>i[Object.keys(E.edges)[0]]);return t({individualEdgeGroups:d,edgeGroups:u,nodeShape:v,labelAreaPosition:y,groupLabelAreaPosition:f,representativeEdgeState:k,edgeStates:i,edgeConfig:n,scale:c}),(E,w)=>(o.openBlock(),o.createElementBlock("g",Gu,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(u).individual,(h,g)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:g},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(h.edges,(P,b)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:b},[o.unref(i)[b].loop?o.createCommentVNode("",!0):o.renderSlot(E.$slots,"edge-label",{key:0,edgeId:b,edge:P,config:o.unref(n).label,area:o.unref(y)(b,o.unref(i)[b].line.stroke),hovered:o.unref(i)[b].hovered,selected:o.unref(i)[b].selected,scale:o.unref(c)},void 0,!0)],64))),128))],64))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(u).summarized,(h,g)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:g},[o.unref(k)(h).loop?o.createCommentVNode("",!0):o.renderSlot(E.$slots,"edges-label",{key:0,edges:h.edges,config:o.unref(n).label,area:o.unref(f)(g,h),hovered:o.unref(k)(h).hovered,selected:o.unref(k)(h).selected,scale:o.unref(c)},void 0,!0)],64))),128))]))}}),kf="",Ku=te(Xu,[["__scopeId","data-v-2f3af414"]]),Yu=o.defineComponent({setup(e,{expose:t}){const{viewport:n}=mt(),r=o.ref(),i=(l,s,c)=>{l.forEach(d=>{var u;return s.setAttribute(d,(u=c.getAttribute(d))!=null?u:"")})},a=new MutationObserver(l=>{if(!r.value)return;const s=l.map(c=>{var d;return(d=c.attributeName)!=null?d:""}).filter(Boolean);i(s,r.value,n.value)});return o.onMounted(()=>{const l=["transform","style"];a.observe(n.value,{attributes:!0,attributeFilter:l}),r.value&&i(l,r.value,n.value)}),o.onUnmounted(()=>{a.disconnect()}),t({background:r}),(l,s)=>(o.openBlock(),o.createElementBlock("g",{ref_key:"background",ref:r,class:"v-background-viewport"},[o.renderSlot(l.$slots,"default")],512))}});var Qu=Object.defineProperty,Jo=Object.getOwnPropertySymbols,Ju=Object.prototype.hasOwnProperty,ed=Object.prototype.propertyIsEnumerable,er=(e,t,n)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tr=(e,t)=>{for(var n in t||(t={}))Ju.call(t,n)&&er(e,n,t[n]);if(Jo)for(var n of Jo(t))ed.call(t,n)&&er(e,n,t[n]);return e};const td={class:"v-background-grid","shape-rendering":"crispEdges"},nd=["d"],od=["d"],rd=["d"],id=["d"],ad=o.defineComponent({setup(e,{expose:t}){const{container:n,svgPanZoom:r}=mt(),{zoomLevel:i}=re(),a=eu(),l=As(),s=o.ref({x:0,y:0}),c=o.ref({width:500,height:500});o.onMounted(()=>{var f;const k=(f=r.value)==null?void 0:f.getPan();k&&(s.value={x:-k.x,y:-k.y});const E=n.value.getBoundingClientRect();c.value={width:E.width,height:E.height}}),a.on("view:resize",f=>{c.value={width:f.width,height:f.height}}),a.on("view:pan",f=>{s.value={x:-f.x,y:-f.y}}),a.on("view:zoom",()=>{var f;const k=(f=r.value)==null?void 0:f.getPan();k&&(s.value={x:-k.x,y:-k.y})});const d=o.ref([]),u=o.ref([]),v=o.ref([]),y=o.ref([]);return o.watchEffect(()=>{const f=[],k=[],E=[],w=[],h=1/i.value,g=l.grid.interval,P=s.value.x*h,b=s.value.y*h,p=Math.floor(c.value.width/g+1)*g,m=Math.floor(c.value.height/g+1)*g,x=(s.value.x+p)*h,S=(s.value.y+m)*h,_=l.grid.thickIncrements,T=l.grid.line.dasharray,C=l.grid.thick.dasharray;let B={stroke:l.grid.thick.color,"stroke-width":l.grid.thick.width,"stroke-dasharray":C,"stroke-dashoffset":C?P/h:void 0},L={stroke:l.grid.line.color,"stroke-width":l.grid.line.width,"stroke-dasharray":T,"stroke-dashoffset":T?P/h:void 0};const H=(s.value.x+p)*h;for(let D=b;D<=S;D+=g){const Z=Math.floor(D/g);_&&Z%_===0?f.push([Z,Z*g,P,H,B]):E.push([Z,Z*g,P,H,L])}B=tr({},B),B["stroke-dashoffset"]=C?b/h:void 0,L=tr({},L),L["stroke-dashoffset"]=T?b/h:void 0;const I=(s.value.y+m)*h;for(let D=P;D<=x;D+=g){const Z=Math.floor(D/g);_&&Z%_===0?k.push([Z,Z*g,b,I,B]):w.push([Z,Z*g,b,I,L])}u.value=f,d.value=k,y.value=E,v.value=w}),t({thickVerticals:d,thickHorizontals:u,normalVerticals:v,normalHorizontals:y}),(f,k)=>(o.openBlock(),o.createElementBlock("g",td,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(y.value,([E,w,h,g,P])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nv${E}`,d:`M ${h} ${w} L ${g} ${w}`},P,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,nd))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(v.value,([E,w,h,g,P])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nh${E}`,d:`M ${w} ${h} L ${w} ${g}`},P,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,od))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(u.value,([E,w,h,g,P])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`tv${E}`,d:`M ${h} ${w} L ${g} ${w}`},P,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,rd))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(d.value,([E,w,h,g,P])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`th${E}`,d:`M ${w} ${h} L ${w} ${g}`},P,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,id))),128))]))}}),Pf="";function pt(...e){return e.find(t=>!!t)}var sd=Object.defineProperty,ld=Object.defineProperties,cd=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,ud=Object.prototype.hasOwnProperty,dd=Object.prototype.propertyIsEnumerable,or=(e,t,n)=>t in e?sd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fd=(e,t)=>{for(var n in t||(t={}))ud.call(t,n)&&or(e,n,t[n]);if(nr)for(var n of nr(t))dd.call(t,n)&&or(e,n,t[n]);return e},hd=(e,t)=>ld(e,cd(t));const pd=Number.EPSILON*100;function gd(e,t,n,r,i,a,l,s){var c,d;const u=e.edges,v=md(u),y=u.map((h,g)=>yd(h,v[g],r[h.edgeId])),f=[];let k=!1,E=!1;{const h=y[0];let g=Te(t[h.source].shape)*i;const P=s+(l==="edgeOfNode"?g:0),b=P<=0?h.line.source:rr(h,P,n,!0);f.push(b),g=Te(t[h.target].shape)*i,s>0&&F.distance(h.line.source,h.line.target)<=P+g&&(k=!0)}const w=u.length;for(let h=1;h<w;h++){const g=y[h-1],P=y[h],b=P.source,p=z.fromObject((c=n[b])!=null?c:{x:0,y:0}),m=vd(g,P,p),x=Te(t[b].shape)*i,S=Math.max(x*(2/3),x-4*i),_=en(g),T=en(P),C=gt(g,p,S,_),B=gt(P,p,S,!T),L=gt(g,p,x,_),H=gt(P,p,x,!T);let I;if(m){const D=F.distance(m,p);if(D<S)I=[pt(C,L,g.line.target),m,pt(B,H,P.line.source)];else if(D<=x){let Z,K;L&&C?Z=F.distance(m,C)<F.distance(m,L)?C:L:Z=L||g.line.target,H&&B?K=F.distance(m,B)<F.distance(m,H)?B:H:K=H||P.line.source,I=[Z,m,K]}else C&&B?I=[C,p,B]:L&&H?I=[L,p,H]:I=[pt(C,L,g.line.target),p,pt(B,H,P.line.source)]}else C&&B?I=[C,p,B]:L&&H?I=[L,p,H]:I=[g.line.target,p,P.line.source];if(g.curve){const D=f[f.length-1];if(D){const Z=D instanceof Array?D[D.length-1]:D;let K;I instanceof Array?K=a?I[0]:I[1]:K=I;const ge=Rt(Z,g.curve.circle.center,K,g.curve.theta);I instanceof Array&&a?f.push([...ge,...I]):f.push([...ge,K])}}else if(g.loop){const[D,Z,K]=ar(p,g,x);f.push(D),f.push(K),I instanceof Array&&a?f.push([Z,I[1],I[2]]):f.push(I[2])}else a||!(I instanceof Array)?f.push(I):P.curve?f.push(I[1]):P.loop?f.push(I[0]):f.push(I[0],I[2])}{const h=y[y.length-1];let g=Te(t[h.target].shape)*i;const P=s+(l==="edgeOfNode"?g:0),b=P<=0?h.line.target:rr(h,P,n,!1);if(g=Te(t[h.source].shape)*i,h.loop){const p=z.fromObject((d=n[h.target])!=null?d:{x:0,y:0}),[m,x,S]=ar(p,h,g);f.push(m),f.push(S)}else if(h.curve){const p=f[f.length-1],m=p instanceof Array?p[p.length-1]:p,x=Rt(m,h.curve.circle.center,b,h.curve.theta);f.push([...x,b])}else f.push(b);s>0&&F.distance(h.line.source,h.line.target)<=P+g&&(E=!0)}return k&&(f.shift(),f[0]instanceof Array&&f.unshift(f[0][0])),E&&f.pop(),f}function md(e){const t=e.length;if(t<=1)return[!0];const n=[];let r=null,i=!0;for(let a=0;a<t;a++){const l=e[a].edge.source,s=e[a].edge.target;if(a===0)if(t>2){const c=[l,s].sort(),d=[e[1].edge.source,e[1].edge.target].sort();c[0]===d[0]&&c[1]===d[1]?[e[2].edge.source,e[2].edge.target].includes(e[1].edge.target)?i=s===e[1].edge.source:i=s===e[1].edge.target:i=[e[1].edge.source,e[1].edge.target].includes(s)}else i=[e[1].edge.source,e[1].edge.target].includes(s);else l===s||(i=r===l);n.push(i),r=i?s:l}return n}function rr(e,t,n,r){const i=r?e.source:e.target,a=e.curve;if(a){let l=t/a.circle.radius;return a.theta>0&&(l*=-1),r||(l*=-1),z.fromObject(fe(r?e.line.source:e.line.target,a.circle.center,l))}else{let l,s;if(r?(l=e.line.target,s=e.line.source):(l=e.line.source,s=e.line.target),n[i]){const c=at(l,s,z.fromObject(n[i]),t);return c===null?l:c}else return l}}function vd(e,t,n){let r=null;if(e.loop||t.loop)r=null;else if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();r=Re(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else r=Ql(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)r=at(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const i=ir(e.line),a=ir(t.line);!isFinite(i)&&!isFinite(a)||Math.abs(i-a)<pd?r=null:r=_e(e.line,t.line)}return r}function gt(e,t,n,r){if(e.loop){const i=Re(t,n,e.loop.center,e.loop.radius[0]);return i?r?i[0]:i[1]:null}else return e.curve?Re(t,n,e.curve.circle.center,e.curve.circle.radius,z.fromObject(e.curve.center)):at(r?e.line.source:e.line.target,r?e.line.target:e.line.source,t,n)}function yd(e,t,n){let r=n.origin,i=e.edge.source,a=e.edge.target,l=n.curve;const s=n.loop;s?r=n.position:t||(r=Yl(r),i=e.edge.target,a=e.edge.source,l&&(l=hd(fd({},l),{theta:-l.theta})));const c=q.fromLinePosition(r);return{edgeId:e.edgeId,source:i,target:a,line:c,direction:t,curve:l,loop:s}}function ir(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}function ar(e,t,n){const{radius:r,center:i}=R(t.loop,"Loop of edge parameter"),[a,l]=r,s=Re(e,n,i,r[0]);let[c,d]=s?s.reverse():[t.line.source,t.line.target];const u=en(t);u||([c,d]=[d,c]);const v=c,y=d,f=z.fromObject(v).subtract(i).angleDegree();let w=(z.fromObject(y).subtract(i).angleDegree()+360-f)%360>=180;return w=u?w:!w,[v,y,`A ${a} ${l} 0 ${w?1:0} ${u?1:0} ${y.x} ${y.y}`]}function en(e){return e.loop?e.direction?e.loop.isClockwise:!e.loop.isClockwise:!0}const bd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],wd=o.defineComponent({props:{points:{type:Array,required:!0},path:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:r}=re(),i=Jn(),a=o.computed(()=>{let d=!0;return n.points.map(u=>{if(u===null)d=!0;else{if(typeof u=="string")return u;if(u instanceof Array){u=[...u];const v=[];if(u.length%2===1){const y=u[0];u=u.slice(1),v.push(`L ${y.x} ${y.y}`)}return Gt(u,2).map(([y,f])=>v.push(`Q ${y.x} ${y.y} ${f.x} ${f.y}`)),v.join(" ")}else{const v=d;return d=!1,`${v?"M ":"L "}${u.x} ${u.y}`}}}).join(" ")}),l=o.computed(()=>{const d=n.path;return d.selected?O.values(i.selected,d.path):d.hovered&&i.hover?O.values(i.hover,d.path):O.values(i.normal,d.path)}),s=o.computed(()=>ze(l.value.dasharray,r.value)),c=o.computed(()=>{const d=l.value.animate?Ue(l.value.dasharray)*l.value.animationSpeed*r.value:!1;return d?`--animation-speed:${d}`:void 0});return t({d:a,scale:r,config:l,strokeDasharray:s,animationSpeed:c}),(d,u)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-path-line":!0,animate:o.unref(l).animate}),d:o.unref(a),fill:"none",stroke:o.unref(l).color,"stroke-width":o.unref(l).width*o.unref(r),"stroke-dasharray":o.unref(s),"stroke-linecap":o.unref(l).linecap,"stroke-linejoin":o.unref(l).linejoin,style:o.normalizeStyle(o.unref(c))},null,14,bd))}}),xf="",Ed=te(wd,[["__scopeId","data-v-b2aa6c6f"]]),kd=o.defineComponent({setup(e,{expose:t}){const{pathZOrderedList:n,nodeStates:r,edgeStates:i,layouts:a}=$e(),{scale:l}=re(),s=Jn(),{handlePathPointerDownEvent:c,handlePathPointerOverEvent:d,handlePathPointerOutEvent:u,handlePathClickEvent:v,handlePathDoubleClickEvent:y,handlePathContextMenu:f}=ut(),k=o.computed(()=>E=>{if(E.edges.length===0)return[];const w=O.value(s.margin,E.path)*l.value;return gd(E,r,a.nodes,i,l.value,s.curveInNode,s.end,w)});return t({pathConfig:s,pathZOrderedList:n,calcPathPoints:k,handlePathPointerDownEvent:c,handlePathPointerOverEvent:d,handlePathPointerOutEvent:u,handlePathClickEvent:v,handlePathDoubleClickEvent:y,handlePathContextMenu:f}),(E,w)=>(o.openBlock(),o.createBlock(o.TransitionGroup,{name:o.unref(s).transition,css:!!o.unref(s).transition,tag:"g",class:"v-paths"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),h=>(o.openBlock(),o.createBlock(Ed,{key:h.id,points:o.unref(k)(h),class:o.normalizeClass({clickable:h.clickable,hoverable:h.hoverable}),path:h,onPointerdown:g=>o.unref(c)(h.id,g),onPointerenterPassive:g=>o.unref(d)(h.id,g),onPointerleavePassive:g=>o.unref(u)(h.id,g),onClick:o.withModifiers(g=>o.unref(v)(h.id,g),["stop"]),onDblclick:o.withModifiers(g=>o.unref(y)(h.id,g),["stop"]),onContextmenu:g=>o.unref(f)(h.id,g)},null,8,["points","class","path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),Sf="",Pd=te(kd,[["__scopeId","data-v-e4553f35"]]),xd=["points","fill"],Sd=o.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const t=e,n=o.computed(()=>{const r=t.width,i=t.height;return t.isSource?`${r} ${i}, 0 ${i/2}, ${r} 0`:`0 0, ${r} ${i/2}, 0 ${i}`});return(r,i)=>(o.openBlock(),o.createElementBlock("polygon",{points:o.unref(n),fill:e.color},null,8,xd))}}),_d=["points","stroke-width","stroke"],Od=o.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const t=e,n=o.computed(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),r=o.computed(()=>{const i=n.value/2,a=t.width,l=t.height;return t.isSource?`${a-i} ${l-i}, ${i} ${l/2}, ${a-i} ${i}`:`${i} ${i}, ${a-i} ${l/2}, ${i} ${l-i}`});return(i,a)=>(o.openBlock(),o.createElementBlock("polyline",{points:o.unref(r),fill:"none","stroke-width":o.unref(n),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,_d))}}),Md=["fill","cx","cy","rx","ry"],Cd=o.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,Md))}}),Td=["id","markerWidth","markerHeight","refX","refY","markerUnits"],$d=o.defineComponent({props:{id:{type:String,required:!0},marker:{type:Object,required:!0},scale:{type:Number,required:!0}},setup(e){const t=e,n={arrow:Sd,angle:Od,circle:Cd},r=o.computed(()=>t.marker.width*(t.marker.units==="strokeWidth"?1:t.scale)),i=o.computed(()=>t.marker.height*(t.marker.units==="strokeWidth"?1:t.scale)),a=o.computed(()=>{const l=t.marker.margin*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?r.value+l:-l});return(l,s)=>e.marker.type!=="none"&&e.marker.type!=="custom"?(o.openBlock(),o.createElementBlock("marker",{key:0,id:e.id,markerWidth:o.unref(r),markerHeight:o.unref(i),refX:o.unref(a),refY:o.unref(i)/2,orient:"auto",markerUnits:e.marker.units,class:"v-marker"},[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n[e.marker.type]),{width:o.unref(r),height:o.unref(i),refX:o.unref(a),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,Td)):o.createCommentVNode("",!0)}}),Bd=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],zd=o.defineComponent({props:{box:{type:Object,required:!0},config:{type:Object,required:!0}},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("rect",{class:"selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,Bd))}}),_f="",Id=te(zd,[["__scopeId","data-v-3b18ff1c"]]),Ad=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],Ld=o.defineComponent({components:{VNode:Ou,VNodeFocusRing:Cu,VEdgeGroups:qu,VEdgeBackgrounds:Uu,VEdgeLabels:Ku,VBackgroundViewport:Yu,VBackgroundGrid:ad,VPaths:Pd,VMarkerHead:$d,VSelectionBox:Id},props:{nodes:{type:Object,default:()=>({})},edges:{type:Object,default:()=>({})},paths:{type:[Object,Array],default:()=>({})},layouts:{type:Object,default:()=>({})},zoomLevel:{type:Number,default:1},selectedNodes:{type:Array,default:()=>[]},selectedEdges:{type:Array,default:()=>[]},selectedPaths:{type:Array,default:()=>[]},configs:{type:Object,default:()=>({})},layers:{type:Object,default:()=>({})},eventHandlers:{type:Object,default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{emit:t,slots:n}){const r=o.toRef(e,"nodes"),i=o.toRef(e,"edges"),{objects:a,isInCompatibilityModeForPath:l}=yu(o.toRef(e,"paths")),s=Jc();Object.entries(e.eventHandlers).forEach(([M,A])=>{s.on(M,A)});const c=Is(o.toRef(e,"configs")),d=o.computed(()=>{const M=new Set(Object.keys(n));Ad.forEach(U=>M.delete(U));const A=Object.fromEntries(an.map(U=>[U,[]]));return Object.assign(A,Object.entries(e.layers).reduce((U,[W,ae])=>(M.delete(W),ae in U?U[ae].push(W):U[ae]=[W],U),{})),A.root.push(...M),A}),u=o.computed(()=>c.view.grid.visible),v=o.computed(()=>{const M=d.value;return u.value||M.background.length>0||M.grid.length>0}),y=o.computed(()=>"override-node"in n),f=o.computed(()=>"override-node-label"in n),k=o.computed(()=>"edge-overlay"in n),E=o.computed(()=>"edge-label"in n),w=o.computed(()=>"edges-label"in n),h=o.ref(),g=o.ref(),P=o.ref(),b=o.ref(0),p=o.computed(()=>b.value!==0),m=bu(e,"zoomLevel",t,M=>(M=Math.max(M,c.view.minZoomLevel),M=Math.min(M,c.view.maxZoomLevel),M)),{svgPanZoom:x,onSvgPanZoomMounted:S,onSvgPanZoomUnmounted:_}=hu(g,{viewportSelector:".v-viewport",minZoom:c.view.minZoomLevel,maxZoom:c.view.maxZoomLevel,dblClickZoomEnabled:sr(c.view),mouseWheelZoomEnabled:tn(c.view),fit:!0,center:!0,zoomEnabled:c.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:M=>{var A,U;if(b.value===2)return;const W=(U=(A=x.value)==null?void 0:A.getRealZoom())!=null?U:1;Math.abs(m.value-W)>=1e-6&&(m.value=W,s.emit("view:zoom",W))},panEnabled:c.view.panEnabled,onPan:M=>{b.value!==2&&s.emit("view:pan",M)}});br({container:h,svg:g,viewport:P,svgPanZoom:x});const T={width:0,height:0},C=globalThis.ResizeObserver?new ResizeObserver(()=>{var M,A,U;if((M=x.value)==null||M.resize(),!c.view.autoPanOnResize)return;const W=(A=h.value)==null?void 0:A.getBoundingClientRect();if(W){const ae=-(T.width-W.width)/2,on=-(T.height-W.height)/2;(U=x.value)==null||U.panBy({x:ae,y:on});const{width:Fe,height:rn}=W;(T.width!==Fe||T.height!==rn)&&(Object.assign(T,{width:Fe,height:rn}),s.emit("view:resize",{x:W.x,y:W.y,width:Fe,height:rn}))}}):void 0;S(()=>{var M,A,U;const W=R(h.value,"svg-pan-zoom container");C==null||C.observe(W),(A=(M=c.view).onSvgPanZoomInitialized)==null||A.call(M,R(x.value,"svg-pan-zoom instance"));const ae=W.getBoundingClientRect(),{width:on,height:Fe}=ae;Object.assign(T,{width:on,height:Fe}),(U=P.value)==null||U.addEventListener("touchstart",lr,{passive:!1})}),_(()=>{var M;C==null||C.disconnect(),(M=P.value)==null||M.removeEventListener("touchstart",lr)});const B=M=>{var A;(A=x.value)==null||A.applyAbsoluteZoomLevel(M,c.view.minZoomLevel,c.view.maxZoomLevel)};o.watch(()=>c.view.panEnabled,M=>{var A;(A=x.value)==null||A.setPanEnabled(M)}),o.watch(()=>[c.view.zoomEnabled,sr(c.view),tn(c.view)],M=>{jd(x.value,c.view.zoomEnabled,c.view.doubleClickZoomEnabled,c.view.mouseWheelZoomEnabled)}),o.watch(m,M=>B(M)),o.watch(()=>[c.view.minZoomLevel,c.view.maxZoomLevel],M=>{B(m.value)});const{scale:L}=pu(m,c.view);S(()=>{const M=e.zoomLevel;B(M)});const H=M=>{var A;Object.keys(e.nodes).length>0?((A=x.value)==null||A.updateBBox(),o.nextTick(M)):M()},I=()=>{H(()=>{x.value&&(x.value.fitToContents(),s.emit("view:fit",void 0))})},D=()=>{H(()=>{var M;(M=x.value)==null||M.center()})},Z=()=>{var M,A;return(A=(M=x.value)==null?void 0:M.getViewBox())!=null?A:{top:0,bottom:0,left:0,right:0}},K=M=>{var A;return(A=x.value)==null?void 0:A.setViewBox(M)},ge=Jt(e,"selectedNodes",r,t);o.watch(ge,M=>s.emit("node:select",Array.from(M)));const Y=Jt(e,"selectedEdges",i,t);o.watch(Y,M=>s.emit("edge:select",Array.from(M)));const Oe=Jt(e,"selectedPaths",a,t);o.watch(Oe,M=>s.emit("path:select",Array.from(M)));const Be=ve(new Set),hr=ve(new Set),pr=ve(new Set),me=ve({nodes:{}});o.watch(()=>e.layouts,()=>Object.assign(me,e.layouts),{deep:!0,immediate:!0}),o.watch(me,()=>t("update:layouts",me),{deep:!0});const ef=o.computed(()=>c.node.focusring.visible),gr=cc(),nn=o.ref(!1);s.on("node:dragstart",M=>nn.value=!0),s.on("node:dragend",M=>nn.value=!1),s.on("view:mode",M=>{var A,U,W,ae;c.view.panEnabled&&(M==="default"?(A=x.value)==null||A.enablePan():(U=x.value)==null||U.disablePan()),c.view.zoomEnabled&&(M==="default"?(W=x.value)==null||W.enableZoom():(ae=x.value)==null||ae.disableZoom())});const tf=o.computed(()=>c.view.panEnabled||c.view.zoomEnabled||c.node.draggable),{nodeStates:mr,nodeZOrderedList:nf,edgeStates:of,pathStates:rf}=mc(qt(r,ge,Be),qt(i,Y,hr),qt(a,Oe,pr),o.readonly(c),me,gr,L),af=o.computed(()=>tn(c.view)),{isBoxSelectionMode:sf,selectionBox:lf,startBoxSelection:cf,stopBoxSelection:uf}=Yc(g,o.readonly(me),o.readonly(m),mr,of,rf,ge,Y,Oe,Be,hr,pr,l,af,c,s),df=o.computed(()=>c.path.visible),vr=()=>({layouts:ve(me.nodes),nodePositions:o.toRef(me,"nodes"),nodes:r,edges:i,configs:o.readonly(c),scale:o.readonly(L),emitter:s,svgPanZoom:R(x.value)});o.watch(()=>c.view.layoutHandler,(M,A)=>{A.deactivate(),M.activate(vr())});const{transitionWhile:ff,transitionOption:yr}=vu(),hf=o.computed(()=>{const M=yr.value;return M.enabled?{"--transition-duration":M.duration+"ms","--transition-function":M.timingFunction}:{}});return S(()=>{H(()=>{const M=R(x.value,"svg-pan-zoom");c.view.layoutHandler.activate(vr()),o.nextTick(()=>{const A=c.view.autoPanAndZoomOnLoad;if(c.view.fit||A!==!1)if(Object.keys(e.nodes).length==0||A==="center-zero"){const W=M.getSizes();M.pan({x:W.width/2,y:W.height/2})}else A==="fit-content"||c.view.fit?I():A==="center-content"&&D();s.emit("view:load"),b.value=1})})}),_(()=>{b.value=2,s.emit("view:unload"),c.view.layoutHandler.deactivate()}),{container:h,svg:g,viewport:P,show:p,svgPanZoom:x,allConfigs:c,layerDefs:d,isShowGrid:u,isShowBackgroundViewport:v,hasOverrideNodeSlot:y,hasOverrideNodeLabelSlot:f,hasEdgeOverlaySlot:k,hasEdgeLabelSlot:E,hasEdgesLabelSlot:w,scale:L,nodeStates:mr,nodeZOrderedList:nf,currentSelectedNodes:ge,markers:gr.markers,dragging:nn,touches:tf,currentLayouts:me,visibleNodeFocusRing:ef,visiblePaths:df,transitionOption:yr,transitionStyles:hf,isBoxSelectionMode:sf,selectionBox:lf,fitToContents:I,panToCenter:D,getViewBox:Z,setViewBox:K,transitionWhile:ff,startBoxSelection:cf,stopBoxSelection:uf}},methods:{zoomIn(){var e;(e=this.svgPanZoom)==null||e.zoomIn()},zoomOut(){var e;(e=this.svgPanZoom)==null||e.zoomOut()},panTo(e){var t;(t=this.svgPanZoom)==null||t.pan(e)},panBy(e){var t;(t=this.svgPanZoom)==null||t.panBy(e)},getPan(){return R(this.svgPanZoom).getPan()},getSizes(){const e=R(this.svgPanZoom).getSizes();return{width:e.width,height:e.height,viewBox:e.viewBox}},translateFromDomToSvgCoordinates(e){return Kt(R(this.svg,"svg"),R(this.viewport,"viewport"),e)},translateFromSvgToDomCoordinates(e){return qc(R(this.svg,"svg"),R(this.viewport,"viewport"),e)},getAsSvg(){const e=R(this.svg,"svg"),t=R(this.viewport,"svg viewport"),n=e.cloneNode(!0),r=t.getBBox(),i=1/this.scale,a={x:Math.floor((r.x-10)*i),y:Math.floor((r.y-10)*i),width:Math.ceil((r.width+20)*i),height:Math.ceil((r.height+20)*i)};n.setAttribute("width",a.width.toString()),n.setAttribute("height",a.height.toString());const l=n.querySelector(".v-viewport");l.setAttribute("transform",`translate(${-a.x} ${-a.y}), scale(${i})`),l.removeAttribute("style"),n.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),n.removeAttribute("style");let s=n.outerHTML;return s=s.replaceAll(/ data-v-[0-9a-z]+=""/g,""),s=s.replaceAll(/<!--[\s\S]*?-->/gm,""),s}}});function jd(e,t,n,r){e.setZoomEnabled(t),t&&n?e.enableDblClickZoom():e.disableDblClickZoom(),t&&r?e.enableMouseWheelZoom():e.disableMouseWheelZoom()}function sr(e){return e.zoomEnabled&&e.doubleClickZoomEnabled}function tn(e){return e.zoomEnabled&&e.mouseWheelZoomEnabled}function lr(e){e.stopPropagation()}const Of="",Mf="",Nd={ref:"container",class:"v-network-graph"},Dd={key:0},Zd={class:"v-layer-edges"},Rd={key:1,class:"v-layer-nodes-selections"};function Vd(e,t,n,r,i,a){const l=o.resolveComponent("v-marker-head"),s=o.resolveComponent("v-background-grid"),c=o.resolveComponent("v-background-viewport"),d=o.resolveComponent("v-edge-backgrounds"),u=o.resolveComponent("v-edge-groups"),v=o.resolveComponent("v-edge-labels"),y=o.resolveComponent("v-node-focus-ring"),f=o.resolveComponent("v-node"),k=o.resolveComponent("v-paths"),E=o.resolveComponent("v-selection-box");return o.openBlock(),o.createElementBlock("div",Nd,[(o.openBlock(),o.createElementBlock("svg",{ref:"svg",class:o.normalizeClass(["v-canvas",{show:e.show,dragging:e.dragging,touches:e.touches,"box-selection-mode":e.isBoxSelectionMode}]),width:"100%",height:"100%"},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.root,w=>o.renderSlot(e.$slots,w,{key:w,scale:e.scale},void 0,!0)),128)),Object.keys(e.markers).length>0?(o.openBlock(),o.createElementBlock("defs",Dd,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.markers,(w,h)=>(o.openBlock(),o.createBlock(l,{id:h,key:h,marker:w,scale:e.scale},null,8,["id","marker","scale"]))),128))])):o.createCommentVNode("",!0),e.isShowBackgroundViewport?(o.openBlock(),o.createBlock(c,{key:1},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.background,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128)),e.isShowGrid?(o.openBlock(),o.createBlock(s,{key:0})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.grid,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128))]),_:3})):o.createCommentVNode("",!0),o.createElementVNode("g",{ref:"viewport",class:o.normalizeClass(["v-viewport",{"v-transition":e.transitionOption.enabled}]),style:o.normalizeStyle(e.transitionStyles)},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.base,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128)),o.createElementVNode("g",Zd,[o.createVNode(d),o.createVNode(u,{hasEdgeOverlaySlot:e.hasEdgeOverlaySlot},{default:o.withCtx(w=>[o.renderSlot(e.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(w)),void 0,!0)]),_:3},8,["hasEdgeOverlaySlot"])]),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.edges,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128)),e.hasEdgeLabelSlot||e.hasEdgesLabelSlot?(o.openBlock(),o.createBlock(v,{key:0},o.createSlots({_:2},[e.hasEdgeLabelSlot?{name:"edge-label",fn:o.withCtx(w=>[o.renderSlot(e.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(w)),void 0,!0)])}:void 0,e.hasEdgesLabelSlot?{name:"edges-label",fn:o.withCtx(w=>[o.renderSlot(e.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(w)),void 0,!0)])}:void 0]),1024)):o.createCommentVNode("",!0),e.visibleNodeFocusRing?(o.openBlock(),o.createElementBlock("g",Rd,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.currentSelectedNodes,w=>(o.openBlock(),o.createBlock(y,{id:w,key:w,state:e.nodeStates[w],pos:e.currentLayouts.nodes[w]},null,8,["id","state","pos"]))),128))])):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.focusring,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128)),e.hasOverrideNodeSlot||e.hasOverrideNodeLabelSlot?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:2,name:e.allConfigs.node.transition,css:!!e.allConfigs.node.transition,tag:"g",class:"v-layer-nodes"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.nodeZOrderedList,w=>(o.openBlock(),o.createBlock(f,{id:w.id,key:w.id,state:w,pos:e.currentLayouts.nodes[w.id]},o.createSlots({_:2},[e.hasOverrideNodeSlot?{name:"override-node",fn:o.withCtx(h=>[o.renderSlot(e.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(h)),void 0,!0)])}:void 0,e.hasOverrideNodeLabelSlot?{name:"override-node-label",fn:o.withCtx(h=>[o.renderSlot(e.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(h)),void 0,!0)])}:void 0]),1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:3,name:e.allConfigs.node.transition,css:!!e.allConfigs.node.transition,tag:"g",class:"v-layer-nodes"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.nodeZOrderedList,w=>(o.openBlock(),o.createBlock(f,{id:w.id,key:w.id,state:w,pos:e.currentLayouts.nodes[w.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"])),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.nodes,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128)),e.visiblePaths?(o.openBlock(),o.createBlock(k,{key:4})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.layerDefs.paths,w=>(o.openBlock(),o.createElementBlock("g",{key:w,class:"v-layer"},[o.renderSlot(e.$slots,w,{scale:e.scale},void 0,!0)]))),128))],6),e.selectionBox?(o.openBlock(),o.createBlock(E,{key:2,box:e.selectionBox,config:e.allConfigs.view.selection.box},null,8,["box","config"])):o.createCommentVNode("",!0)],2))],512)}const cr=te(Ld,[["render",Vd],["__scopeId","data-v-3040d3ab"]]);var qd=Object.defineProperty,Hd=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,Wd=Object.prototype.hasOwnProperty,Ud=Object.prototype.propertyIsEnumerable,dr=(e,t,n)=>t in e?qd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gd=(e,t)=>{for(var n in t||(t={}))Wd.call(t,n)&&dr(e,n,t[n]);if(ur)for(var n of ur(t))Ud.call(t,n)&&dr(e,n,t[n]);return e},Xd=(e,t)=>Hd(e,Fd(t));const fr=o.defineComponent({props:{area:{type:Object,required:!0},config:{type:Object,required:!0},text:{type:String,required:!1,default:""},align:{type:String,required:!1,default:"center"},verticalAlign:{type:String,required:!1,default:"center"},edge:{type:Object,required:!1,default:void 0},hovered:{type:Boolean,required:!1,default:!1},selected:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,r=o.ref(0),i=o.ref(0),a=o.ref("middle"),l=o.ref("central"),s=o.ref(0);o.watchEffect(()=>{const d=n.area.source,u=n.area.target;n.align==="source"?(d.above.x==u.above.x?a.value=d.above.y>u.above.y?"start":"end":a.value=d.above.x<u.above.x?"start":"end",n.verticalAlign==="above"?(r.value=d.above.x,i.value=d.above.y,l.value="text-top"):n.verticalAlign==="below"?(r.value=d.below.x,i.value=d.below.y,l.value="hanging"):(r.value=(d.above.x+d.below.x)/2,i.value=(d.above.y+d.below.y)/2,l.value="central")):n.align==="target"?(d.above.x==u.above.x?a.value=d.above.y<u.above.y?"start":"end":a.value=d.above.x>u.above.x?"start":"end",n.verticalAlign==="above"?(r.value=u.above.x,i.value=u.above.y,l.value="text-top"):n.verticalAlign==="below"?(r.value=u.below.x,i.value=u.below.y,l.value="hanging"):(r.value=(u.above.x+u.below.x)/2,i.value=(u.above.y+u.below.y)/2,l.value="central")):(a.value="middle",n.verticalAlign==="above"?(r.value=(d.above.x+u.above.x)/2,i.value=(d.above.y+u.above.y)/2,l.value="text-top"):n.verticalAlign==="below"?(r.value=(d.below.x+u.below.x)/2,i.value=(d.below.y+u.below.y)/2,l.value="hanging"):(r.value=(d.above.x+u.below.x)/2,i.value=(d.above.y+u.below.y)/2,l.value="central"));let v=q.fromPositions(d.above,u.above).v.angleDegree();(v<-90||v>=90)&&(v=v+180,v>180&&(v-=360)),s.value=v});const c=o.computed(()=>l.value==="central"&&!n.config.background?Xd(Gd({},n.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):n.config);return t({x:r,y:i,textAnchor:a,dominantBaseline:l,angle:s,updatedConfig:c}),(d,u)=>(o.openBlock(),o.createBlock(He,{class:"v-edge-label",text:e.text,x:r.value,y:i.value,config:o.unref(c),"text-anchor":a.value,"dominant-baseline":l.value,transform:`rotate(${s.value} ${r.value} ${i.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),Kd=Object.freeze(Object.defineProperty({__proto__:null,VNetworkGraph:cr,VShape:qe,VEdgeLabel:fr,VLabelText:He},Symbol.toStringTag,{value:"Module"})),Yd=10;class Qd extends vt{constructor(t={}){super(),this.options=t}setNodePosition(t,n){const r=this.options.grid||Yd;t.value.x=Math.floor(n.x/r)*r,t.value.y=Math.floor(n.y/r)*r}}const Jd=function(e){Object.entries(Kd).forEach(([t,n])=>{e.component(t,n)})};j.Config=O,j.GridLayout=Qd,j.LayerPositions=an,j.NodeLabelDirection=$,j.SimpleLayout=vt,j.VEdgeLabel=fr,j.VLabelText=He,j.VNetworkGraph=cr,j.VShape=qe,j.Vector2D=z,j.configsWithType=wr,j.default=Jd,j.defineConfigs=Er,j.getFullConfigs=zs,j.useStates=$e,j.withSelf=We,Object.defineProperties(j,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.js.map
